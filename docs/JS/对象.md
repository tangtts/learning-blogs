# å¯¹è±¡
è®°å½•å¯¹è±¡ä¸­çš„ api

## è§£æ„
**è§£æ„æ˜¯ä¸€å±‚ *æµ…æ‹·è´***
### åŠ¨æ€è§£æ„
```js
let r = { c:1 };
let { b } = { a:1, b:r };
b.c = 10;
console.log(r) // {c:1}
```
å‡½æ•°æ˜¯è¿”å›äº†ä¸€ä¸ªå¯¹è±¡,è€Œä¸æ˜¯ è§£æ„èµ‹å€¼
```js
function a({name:name1}){
  console.log(name1)
  let c = 10;
  return { x:c } // è¿”å›äº†ä¸€ä¸ªå¯¹è±¡
}

a({name:"zs"})
```

### â­undefined / null
æ¯ä¸ªè§£æ„å±æ€§éƒ½å¯ä»¥æœ‰ä¸€ä¸ªé»˜è®¤å€¼ã€‚å½“å±æ€§ ***ä¸å­˜åœ¨æˆ–å€¼ä¸º undefined*** æ—¶ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ã€‚å¦‚æœå±æ€§çš„å€¼ä¸º nullï¼Œåˆ™ä¸ä½¿ç”¨å®ƒã€‚
```js
const [ a = 1 ] = []; // a is 1
const { b = 2 } = { b: undefined }; // b is 2
const { c = 2 } = { c: null }; // c is null
```
### èµ‹å€¼ç»™æ–°çš„å˜é‡å

```js
const o = { p: 42, q: true };
const { p: foo, q: bar } = o;

console.log(foo); // 42
console.log(bar); // true
```
åŸç†æ˜¯
```js
var o = { p: 42, q: true };
var foo = o.p, bar = o.q;
```

### èµ‹å€¼åˆ°æ–°çš„å˜é‡åå¹¶æä¾›é»˜è®¤å€¼
ä¸€ä¸ªå±æ€§å¯ä»¥åŒæ—¶æ˜¯ä¸¤è€…ï¼š

- ä»å¯¹è±¡æå–å¹¶åˆ†é…ç»™å…·æœ‰ä¸åŒåç§°çš„å˜é‡ã€‚
- æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ï¼Œä»¥é˜²è·å–çš„å€¼ä¸º undefinedã€‚
```js
const { a: aa = 10, b: bb = 5 } = { a: 3 };

console.log(aa); // 3
console.log(bb); // 5
```

### ä»ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’çš„å¯¹è±¡ä¸­æå–å±æ€§
```js
const user = {
  id: 42,
  displayName: 'jdoe',
  fullName: {
    firstName: 'Jane',
    lastName: 'Doe',
  },
};
```
#### è§£æ„ id å±æ€§
```js
function userId({ id }) {
  return id;
}
console.log(userId(user)); // 42
```

#### é‡æ–°å‘½å
```js
function userDisplayName({ displayName: dname }) {
  return dname;
}

console.log(userDisplayName(user)); // `jdoe`
```
#### åµŒå¥—å¯¹è±¡
```js
function whois({ displayName, fullName: { firstName: name } }) {
  return `${displayName} is ${name}`;
}

console.log(whois(user));  // "jdoe is Jane"
```
å¯ä»¥æŠŠè§£æ„çœ‹æˆ `{k:v}` å½¢å¼,ç„¶åä¸ä¼ å…¥å¯¹è±¡ä¸€ä¸€å¯¹åº”, æ‰€ä»¥ `v` å°±æ˜¯æœ€ç»ˆå½¢å¼

### è®¾ç½®å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼
ä¸€å®šè¦å†™ `{}` ,  å› ä¸ºå¦‚æœ `drawChart` ä¸ä¼ å€¼çš„æ—¶å€™, æ— æ³•è§£æ„
```js {2}
function drawChart(
  { size = 'big', coords = { x: 0, y: 0 }, radius = 25 } = {}) {
  console.log(size, coords, radius);
  // do some chart drawing
}

drawChart({
  coords: { x: 18, y: 30 },
  radius: 30,
});
```

<!-- const parameters = { code: `console.log('Hello, world!')` }
const hashString = '#data=' + encodeURIComponent(JSON.stringify(parameters)) -->
<iframe
  height="280"
  width="100%"
  frameborder="1"
  src="//unpkg.com/javascript-playgrounds@^1.0.0/public/index.html?#data=%7B%22code%22%3A%22function%20drawChart(%5Cn%20%20%7B%20size%20%3D%20'big'%2C%20coords%20%3D%20%7B%20x%3A%200%2C%20y%3A%200%20%7D%2C%20radius%20%3D%2025%20%7D%20%3D%20%7B%7D)%20%7B%5Cn%20%20console.log(size%2C%20coords%2C%20radius)%3B%5Cn%20%20%2F%2F%20do%20some%20chart%20drawing%5Cn%7D%5Cn%5CndrawChart(%7B%5Cn%20%20coords%3A%20%7B%20x%3A%2018%2C%20y%3A%2030%20%7D%2C%5Cn%20%20radius%3A%2030%2C%5Cn%7D)%3B%22%7D"
></iframe>

#### ç»„åˆæ•°ç»„å’Œå¯¹è±¡è§£æ„
```js
const props = [
  { id: 1, name: 'Fizz'},
  { id: 2, name: 'Buzz'},
  { id: 3, name: 'FizzBuzz'}
];

const [,, { name }] = props;

console.log(name); // "FizzBuzz"

```

#### è§£æ„å¯¹è±¡æ—¶æŸ¥æ‰¾åŸå‹é“¾
å½“è§£æ„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå±æ€§æœ¬èº«æ²¡æœ‰è¢«è®¿é—®ï¼Œå®ƒå°†æ²¿ç€åŸå‹é“¾ç»§ç»­æŸ¥æ‰¾ã€‚
```js
const obj = {
  self: '123',
  __proto__: {
    prot: '456',
  },
};
const { self, prot } = obj;
// self "123"
// prot "456" (Access to the prototype chain)
```

## Object.create
Object.create() æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œ**ä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥ä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹(prototype)**

```js
const person = {
  isHuman: false,
  printIntroduction: function() {
    console.log(this)
    console.log(`My name is ${this.name}. Am I human? ${this.isHuman}`);
  }
};

const me = Object.create(person);

console.log(me.__proto__ == person) // true
```

## Object.is

- ä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ (ä¹Ÿè¢«ç§°ä½œ"strict equality", "identity", "triple equals")ï¼Œä½¿ç”¨ === ,
- æŠ½è±¡ç›¸ç­‰æ¯”è¾ƒ ("loose equality"ï¼Œ"double equals") ï¼Œä½¿ç”¨ ==
- ä»¥åŠ Object.is ï¼ˆECMAScript 2015/ ES6 æ–°ç‰¹æ€§ï¼‰

::: tip
â­ Object.is() ä¸ === ä¹Ÿä¸ç›¸åŒã€‚å·®åˆ«æ˜¯å®ƒä»¬å¯¹å¾…æœ‰ç¬¦å·çš„é›¶å’Œ NaN ä¸åŒï¼Œä¾‹å¦‚ï¼Œ=== è¿ç®—ç¬¦ï¼ˆä¹ŸåŒ…æ‹¬ == è¿ç®—ç¬¦ï¼‰
***å°†æ•°å­— -0 å’Œ +0 è§†ä¸ºç›¸ç­‰ï¼Œè€Œå°† NaN ä¸ NaN è§†ä¸ºä¸ç›¸ç­‰***ã€‚
:::
```js
Object.is(0, -0);            // false
Object.is(0, +0);            // true
Object.is(-0, -0);           // true
Object.is(NaN, 0/0);         // true
```

```js
+0 === -0 // true

NaN === NaN // false
```

## Object.fromEntries / Object.entries

`from` ä»è¯­ä¹‰ç†è§£, å³ä¸€ä¸ªé”®å€¼å¯¹åˆ—è¡¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚

::: info â­
   entries æ˜¯å°æ¡ç›®ï¼Œå³ **[k : v]** å½¢å¼  

  **Object.fromEntries(iterable)** åˆ—è¡¨è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚  
  **Object.entries(Object)** å°†å¯¹è±¡è½¬åŒ–ä¸ºåˆ—è¡¨ã€‚
:::

```js
var obj = { foo: "bar", baz: 42 };
var map = new Map(Object.entries(obj));
console.log(map); // Map { 'foo' => 'bar', 'baz' => 42 }

const queryString = "?name=jimmy&age=18&height=1.88";
const queryParams = new URLSearchParams(queryString);

// URLSearchParams { 'name' => 'jimmy', 'age' => '18', 'height' => '1.88' }
queryParams // å’Œ Map çš„æ•°æ®ç»“æ„ä¸€è‡´

const paramObj = Object.fromEntries(queryParams);
console.log(paramObj); // { name: 'jimmy', age: '18', height: '1.88' }
```

å¤„ç† Array
```js
const arr = [ ['0', 'a'], ['1', 'b'], ['2', 'c'] ];
const obj = Object.fromEntries(arr);
console.log(obj); // { 0: "a", 1: "b", 2: "c" }
```

## Object.assign

Object.assign() é™æ€æ–¹æ³•å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªæºå¯¹è±¡ä¸­æ‰€æœ‰å¯æšä¸¾çš„è‡ªæœ‰å±æ€§å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼Œå¹¶è¿”å›ä¿®æ”¹åçš„ç›®æ ‡å¯¹è±¡ã€‚

:::tip
  **Object.assign() ä¸ä¼šåœ¨ source å¯¹è±¡å€¼ä¸º null æˆ– undefined æ—¶æŠ›å‡ºé”™è¯¯**

  åŸå‹é“¾ä¸Šçš„å±æ€§å’Œä¸å¯æšä¸¾å±æ€§ä¸èƒ½è¢«å¤åˆ¶
:::

```js {7-8}
const v1 = 'abc';
const v2 = true;
const v3 = 10;
const v4 = Symbol('foo');

const obj = Object.assign({}, v1, null, v2, undefined, v3, v4);
// åŸå§‹ç±»å‹ä¼šè¢«åŒ…è£…ï¼Œnull å’Œ undefined ä¼šè¢«å¿½ç•¥
// æ³¨æ„ï¼Œåªæœ‰å­—ç¬¦ä¸²å°è£…å¯¹è±¡æ‰æ‹¥æœ‰å¯æšä¸¾çš„è‡ªæœ‰å±æ€§ã€‚ 
console.log(obj); // { "0": "a", "1": "b", "2": "c" }

{...undefined} // {}
{...true} // {}
// ç±»ä¼¼äº Object.assign({},undefined)
```
:::info
  ä¸ªäººç†è§£: `Object.assign`å¯¹ `iterator` å±æ€§çš„è½¬åŒ–ä¸ºå¯¹è±¡å½¢å¼,æ‰€ä»¥ `abc` å¯ä»¥è¢«è½¬æˆ `{ 0:'a', 1:"b", 2:'c' }`
:::
### æ·±æ‹·è´é—®é¢˜
é’ˆå¯¹æ·±æ‹·è´ï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–åŠæ³•ï¼Œå› ä¸º Object.assign() åªå¤åˆ¶å±æ€§å€¼ã€‚

å‡å¦‚æºå¯¹è±¡æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒä»…ä»…ä¼šå¤åˆ¶å…¶ **å¼•ç”¨å€¼**ã€‚
```js {14-16}
const obj1 = { a: 0, b: { c: 0 } };
const obj2 = Object.assign({}, obj1);
console.log(obj2); // { a: 0, b: { c: 0 } }

obj1.a = 1;
console.log(obj1); // { a: 1, b: { c: 0 } }
console.log(obj2); // { a: 0, b: { c: 0 } }

obj2.a = 2;
console.log(obj1); // { a: 1, b: { c: 0 } }
console.log(obj2); // { a: 2, b: { c: 0 } }

// æ·±å±‚ä¿®æ”¹
obj2.b.c = 3;
console.log(obj1); // { a: 1, b: { c: 3 } }
console.log(obj2); // { a: 2, b: { c: 3 } }
```
## å±•å¼€è¯­æ³•
å°†æ•°ç»„è¡¨è¾¾å¼æˆ–è€… string åœ¨è¯­æ³•å±‚é¢å±•å¼€ï¼›è¿˜å¯ä»¥åœ¨æ„é€ å­—é¢é‡å¯¹è±¡æ—¶ï¼Œå°†å¯¹è±¡è¡¨è¾¾å¼æŒ‰ key-value çš„æ–¹å¼å±•å¼€
å¯¹äºä¸èƒ½å±•å¼€çš„è¯­æ³•ï¼Œç›´æ¥è¿”å› `{}`

```js
{...undefined}  // {}
{...null}  // {}
{...1} // {}
{...false} // {}
{...'abcd'} // { 0:'a', 1:'b', 2:'c', 3:'d' }
```

<!-- const parameters = { code: `console.log('Hello, world!')` }
const hashString = '#data=' + encodeURIComponent(JSON.stringify(parameters)) -->
<iframe
  height="270"
  width="100%"
  frameborder="1"
  src="https://unpkg.com/javascript-playgrounds@1.2.3/public/index.html#data=%7B%22code%22%3A%22let%20x%20%3D%20%7B...undefined%7D%3Bconsole.log(x)%5Cnlet%20y%20%3D%20%7B...'abcd'%7D%3B%20console.log(y)%3B%5Cn%5Cnlet%20z%20%3D%20%7B...false%7D%3B%20console.log(z)%3B%22%7D"
></iframe>

:::info
  å±•å¼€è¯­æ³•ä¹Ÿæ˜¯å¯¹ <blue>å¯è¿­ä»£å¯¹è±¡</blue> æœ‰æ•ˆ
:::

## null / undefined
```js
 var obj = {}
 obj.a // undefined
 document.getElementById('a') // null
 document.parentNode // null
```
â­ null è¡¨ç¤ºæ— å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä»–ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œæ¯”å¦‚è¿™ä¸ª document æœ¬èº«åº”è¯¥æœ‰å¯¹è±¡ï¼Œä½†æ²¡æœ‰æ‰€ä»¥æ˜¯ null,<blue> ä¹Ÿå¯ä»¥ç†è§£ä¸º åœ¨ æ ˆå†…å­˜ä¸­æ²¡æœ‰å¼•ç”¨å †å†…å­˜ä¸­çš„æŒ‡é’ˆ </blue>
<br/>
<br/>

<blue>undefined è¡¨ç¤ºæ²¡ value å€¼,ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºæœ‰ value å€¼ï¼Œè¿™ä¸ª value å°±æ˜¯ undefined-æš‚ä¸ç¡®å®šçš„å€¼  </blue>

```js
Number(null) // 0
// æŠŠä»–å½“åš å€¼ä½¿ç”¨
Number(undefined) // NaN 


null == 0 // false
undefined == 0 // false
// ä»è¯­ä¹‰ä¸Šç†è§£, null å’Œ undefined éƒ½æ˜¯è¡¨ç¤ºæ— å€¼,åªä¸è¿‡ä¸€ä¸ªæ²¡æœ‰å¯¹è±¡,ä¸€ä¸ªæ˜¯æ²¡æœ‰å€¼
null == undefined // true
```
## å¯è¿­ä»£å¯¹è±¡

```js
let o = {
  a:1,
  b:2
}
let [a,b] = o;
```
å› ä¸º `o` ä¸æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™,éœ€è¦æŠŠ `o` å˜ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼Œæ·»åŠ  `Symbol.iterator` æ–¹æ³•å¹¶è¿”å› `next` å¯¹è±¡


```js
let o = {
  a: 1,
  b: 2,
  [Symbol.iterator]() {
    let values = Object.values(this);
    let index = 0;
    return {
      next: () => {
        if (index <= values.length) {
          let value = values[index];
          index++;
          return { value, done: false };
        } else {
          return {
            done: true
          }
        }
      }
    }
  }
}
let [a1, b] = o
```
## è®¾ç½®/è·å– å¯æšä¸¾

```js
Object.defineProperty(obj, "key2", {
  enumerable: false,   
  configurable: false,
  writable: false,
  value: "static",
});
```

[ğŸ”—è·å–å±æ€§](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)

```js
const obj = {
  name: 'John',
  age: 25
};

const descriptor = Object.getOwnPropertyDescriptor(obj, 'name');
// { 
//   value: 'John',
//   writable: true,
//   enumerable: true,
//   configurable: true
// }
console.log(descriptor);
```