# æ•°ç»„

## some
å¦‚æœç”¨ä¸€ä¸ªç©ºæ•°ç»„è¿›è¡Œæµ‹è¯•ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹å®ƒè¿”å›çš„éƒ½æ˜¯ false

## join
ä¸€ä¸ªæ‰€æœ‰æ•°ç»„å…ƒç´ è¿æ¥çš„å­—ç¬¦ä¸²ã€‚å¦‚æœ arr.length ä¸º0ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚  
**â­å¦‚æœä¸€ä¸ªå…ƒç´ ä¸º undefined æˆ– nullï¼Œå®ƒä¼šè¢«è½¬æ¢ä¸ºç©ºå­—ç¬¦ä¸²**ã€‚

é»˜è®¤ä½¿ç”¨é€—å·é“¾æ¥

<iframe
  height="280"
  width="100%"
  frameborder="1"
  src="//unpkg.com/javascript-playgrounds@^1.0.0/public/index.html?#data=%7B%22code%22%3A%22var%20a%20%3D%20%5B'Wind'%2C%20'Rain'%2C%20'Fire'%2Cundefined%2C'12'%5D%3B%5Cn%20%20a%20%3D%20a.join()%3Bconsole.log(a)%22%7D"
></iframe>

## splice

array.splice( start, [deleteCount], [item1,item2,item3,....] )

months.splice(3); // å°±æ„å‘³ç€ æŠŠä¸‹æ ‡ä¸º 3 ä»¥åçš„å…¨éƒ¨åˆ é™¤

:::tip
  `start` å¯ä»¥æ˜¯è´Ÿæ•°,ç­‰ä»·äº `array.length - start`
:::

## ä¸‹æ ‡
æ•°ç»„ç”¨ `å­—ç¬¦ä¸²` å­˜å‚¨ä¸‹æ ‡
<iframe 
  height="620"
  width="100%"
  frameborder="1"
  src="https://unpkg.com/javascript-playgrounds@1.2.3/public/index.html#data=%7B%22code%22%3A%22let%20a%20%3D%20new%20Array()%3B%5Cna%5B0%5D%20%3D%201%3B%5Cna%5B%5C%220%5C%22%5D%20%3D%202%3B%5Cna%5B0%5D%2B%2B%3B%5Cn%5Cnconsole.log(a%5B0%5D)%3B%5Cnconsole.log(a%5B%5C%220%5C%22%5D)%3B%5Cn%5Cnlet%20arr%20%3D%5B0%2C1%2C2%5D%3B%5Cn%5Cn%5Cnlet%20obj%20%3D%20%5B%5D%3B%5Cnlet%20key%20%3D%20%7Ba%3A1%7D%3B%5Cnobj%5Bkey%5D%20%3D%20%5C%22value%5C%22%3B%5Cn%5Cnconsole.log(obj%5B%5C%22%5Bobject%20Object%5D%5C%22%5D%20)%5Cn%5Cnlet%20a1%20%3D%20%5B1%2C2%2C3%5D%3B%5Cn%5Cnfor(let%20k%20in%20a1)%7B%5Cn%20%20console.log(typeof%20k)%5Cn%7D%5Cn%22%7D">
</iframe>

## slice
è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ª<blue>å·¦é—­å³å¼€</blue>åŒºé—´
```js
let arr = [1,2,3]
let r =  arr.slice(2);
r // [3]
```

```js
let arr = [1,2,3]
let r =  arr.slice(0,2);
r // [1,2]
```
```js
let arr = [1,2,3]
let r =  arr.slice(0,-1);
r // [1,2]
```


## è§£æ„
<blue>æœ¬è´¨æ˜¯è¿­ä»£å™¨,</blue> å¯¹è±¡èº«ä¸Šæ²¡æœ‰è¿­ä»£å™¨,æ„å»ºä¸€ä¸ªè¿­ä»£å™¨

```js 
let obj = { x: 1, y: 2 }

obj[Symbol.iterator] = function* () {
  let idx = 0;
  let values = Object.values(this);
  while (idx < values.length) {
    yield values[idx++]
  }
}

let [x,y] = obj; // 1,2

for (const iterator of obj) {
  iterator
}
```

æˆ–è€…

```js
Object.defineProperty(obj, Symbol.iterator, {
  enumerable: false,
  configurable: true,
  writable: false,
  value() {
    return {
      next() {
        let values = Object.values(obj);
        let idx = 0;
        return {
          done: idx > values.length,
          value: values[idx++]
        }
      }
    }
  }
})
```

## è¿­ä»£å™¨

è¿­ä»£å™¨çš„å¥½å¤„æ˜¯å®ƒæä¾›äº†ä¸€ç§æ ‡å‡†çš„éå†æœºåˆ¶ï¼Œå¯ä»¥é€‚ç”¨äº**å„ç§ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„**ã€‚

å®ƒä¸ºéå†è¿‡ç¨‹æä¾›äº†ç»Ÿä¸€çš„ç•Œé¢ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œå¯è¯»æ€§æ›´å¼ºã€‚      
åŒæ—¶ï¼Œè‡ªå®šä¹‰è¿­ä»£å™¨å¯¹è±¡ä¹Ÿå¯ä»¥ä½¿æˆ‘ä»¬çµæ´»åœ°æ§åˆ¶éå†çš„é¡ºåºå’Œæ–¹å¼

```js
let colors = ['red', 'green', 'blue'];

let iterator = colors[Symbol.iterator](); // è·å–è¿­ä»£å™¨å¯¹è±¡

let nextItem = iterator.next();

while (!nextItem.done) {
  console.log(nextItem.value);
  nextItem = iterator.next();
}
```

é™¤äº† for...of å¾ªç¯å’Œæ‰‹åŠ¨éå†ï¼Œè¿­ä»£å™¨è¿˜å¯ä»¥ä¸å…¶ä»– JavaScript å†…ç½®å‡½æ•°å’Œæ–¹æ³•ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚ `Array.from()`ã€`spread` æ“ä½œç¬¦ç­‰


:::tip
ä¹Ÿå°±æ˜¯è¯´ `forof` éœ€è¦ä¸€ä¸ª**è¿­ä»£å™¨å¯¹è±¡,è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡**ï¼Œè€Œè¿­ä»£å™¨å¯¹è±¡å¯ä»¥é€šè¿‡ `Symbol.iterator` å±æ€§æ¥è·å–ã€‚  

è¿­ä»£å™¨å¯¹è±¡æ˜¯æŒ‡ `{value:"xxxx",done:true/false }`
:::

```js
let array = [1, 2, 3, 4, 5];

Array.prototype[Symbol.iterator] = function () {
  let currentIndex = 0;
  return {
    next: () => {
      if (currentIndex < this.length) {
        return {
          value: this[currentIndex++],
          done: false
        };
      } else {
        return { done: true };
      }
    }
  };
}

for (const iterator of array) {
  console.log(iterator);
}
```

åœ¨å¯¹è±¡ä¸Šæ·»åŠ  `Symbol.iterator` å±æ€§

```js
Object.prototype[Symbol.iterator] = function () {
  return Object.values(this)[Symbol.iterator]()
}
```

```js
let obj = {
  name: 'xiaoming',
  age: 18
}

for (const iterator of obj) {
  // 'xiaoming' 18
  console.log(iterator)
}


let x = Array.from(obj)
// [ 'xiaoming', 18 ]
console.log(x)
```
æˆ–è€…æŠŠä¸Šæ–‡ä¸­çš„`Array` æ¢æˆ `Object`

## sort
**æ’åºå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° a å’Œ bï¼Œä»£è¡¨è¦è¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªå…ƒç´ ã€‚**

- å½“è¿”å›å€¼ä¸º**è´Ÿæ•°**æ—¶ï¼Œè¡¨ç¤º a åº”è¯¥æ’åœ¨ b **å‰é¢**
- å½“è¿”å›å€¼ä¸º**æ­£æ•°**æ—¶ï¼Œè¡¨ç¤º a åº”è¯¥æ’åœ¨ b **åé¢**
- å½“è¿”å›å€¼ä¸ºé›¶æ—¶ï¼Œè¡¨ç¤º a å’Œ b ç›¸ç­‰ï¼Œé¡ºåºä¿æŒä¸å˜ã€‚

| compareFn(a, b) è¿”å›å€¼ | æ’åºé¡ºåº |
| :---: | :---: |
| > 0 | `a` åœ¨ `b` åï¼Œå¦‚ `[b, a]` |
| < 0 | `a` åœ¨ `b` å‰ï¼Œå¦‚ `[a, b]` |
| === 0 | ä¿æŒ `a` å’Œ `b` åŸæ¥çš„é¡ºåº |


```js
let arr = [1,4,3];

arr.sort((a,b)=>{
  return a - b;
})
// [1,3,4]
```
1. a ç­‰äº 1,b ç­‰äº 4,a - b = -3,è¿”å›å€¼æ˜¯è´Ÿæ•°, æ‰€ä»¥ 1 åœ¨ 4 å‰é¢
2. a ç­‰äº 4,b ç­‰äº 3,a - b = 1,è¿”å›å€¼æ˜¯æ­£æ•°, æ‰€ä»¥ 4 åœ¨ 3 åé¢

#### å¯¹è±¡æ•°ç»„æ’åº
```js
const items = [
  { name: "Edward", value: 21 },
  { name: "Sharpe", value: 37 },
  { name: "And", value: 45 },
  { name: "The", value: -12 },
  { name: "Magnetic", value: 13 },
  { name: "Zeros", value: 37 },
];

// æ ¹æ® value æ’åº
items.sort((a, b) => a.value - b.value);

// æ ¹æ® name æ’åº
items.sort((a, b) => {
  const nameA = a.name.toUpperCase(); // å¿½ç•¥å¤§å°å†™
  const nameB = b.name.toUpperCase(); // å¿½ç•¥å¤§å°å†™

  if (nameA < nameB) {
    return -1;
  }

  if (nameA > nameB) {
    return 1;
  }

  // name å¿…é¡»ç›¸ç­‰
  return 0;
});
```

## [ğŸ”—flatMap](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap)

`flatMap()` æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨ç»™å®šçš„å›è°ƒå‡½æ•°ï¼Œç„¶åå°†ç»“æœå±•å¼€ä¸€çº§ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚  

**å®ƒç­‰ä»·äºåœ¨è°ƒç”¨ `map()` æ–¹æ³•åå†è°ƒç”¨æ·±åº¦ä¸º `1` çš„ `flat()` æ–¹æ³•**

```js
const arr1 = [1, 2, 1];

const result = arr1.flatMap((num) => (num === 2 ? [2, 2] : 1));

console.log(result);
// Expected output: Array [1, 2, 2, 1]
```
### åœ¨ map() æ–¹æ³•è¿‡ç¨‹ä¸­æ·»åŠ å’Œåˆ é™¤å…ƒç´ 
flatMap æ–¹æ³•å¯ä»¥ç”¨ä½œåœ¨ map æ–¹æ³•ä¸­æ·»åŠ å’Œåˆ é™¤å…ƒç´ ï¼ˆä¿®æ”¹å…ƒç´ æ•°é‡ï¼‰çš„æ–¹æ³•

- å¦‚æœè¦ä¿ç•™è¯¥é¡¹ï¼Œåˆ™è¿”å›ä¸€ä¸ªåŒ…å«è¯¥é¡¹çš„å•å…ƒç´ æ•°ç»„  
- å¦‚æœè¦æ·»åŠ å…ƒç´ ï¼Œåˆ™è¿”å›ä¸€ä¸ªåŒ…å«å¤šä¸ªå…ƒç´ çš„æ•°ç»„  
- å¦‚æœè¦åˆ é™¤è¯¥é¡¹ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„

```js
// å‡è®¾æˆ‘ä»¬æƒ³è¦åˆ é™¤æ‰€æœ‰è´Ÿæ•°ï¼Œå¹¶å°†å¥‡æ•°æ‹†åˆ†æˆå¶æ•°å’Œ 1
const a = [5, 4, -3, 20, 17, -33, -4, 18];
//         |\  \  x   |  | \   x   x   |
//        [4,1, 4,   20, 16, 1,       18]

const result = a.flatMap((n) => {
  if (n < 0) {
    return [];
  }
  return n % 2 === 0 ? [n] : [n - 1, 1];
});

console.log(result); // [4, 1, 4, 20, 16, 1, 18]
```
ä¼šå±•å¼€
```js
const arr = [1, 2, [4, 5], 6, 7, [8]] ;

console.log(arr.flatMap((element) => element)); 
// output :[1, 2, 4, 5, 6, 7, 8]
```