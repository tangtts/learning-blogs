# è®¾è®¡æ¨¡å¼

## è®¾è®¡åŸåˆ™

1. å­¦ä¹ è®¾è®¡åŸåˆ™ï¼Œè¿™æ˜¯å¯¹è®¾è®¡æ€æƒ³çš„å®è§‚è®¤è¯†ã€‚
2. å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œè¿™æ˜¯å¯¹è®¾è®¡æ€æƒ³çš„å…·ä½“è®¤è¯†ã€‚
3. å†å­¦ä¹ è®¾è®¡åŸåˆ™ï¼Œè¿™æ˜¯å¯¹è®¾è®¡æ€æƒ³çš„è‡ªæˆ‘æŠ½è±¡ã€‚


### 1. S--å•ä¸€èŒè´£åŸåˆ™ Single Responsibility Principle  
   **ä¸€ä¸ªç¨‹åºåªåšä¸€ä»¶äº‹ è¿‡äºå¤æ‚å°±æ‹†åˆ†å¼€,æ¯ä¸ªéƒ¨åˆ†ä¿æŒç‹¬ç«‹**  

  <blue>â­ä¸€äº›ç›¸å…³çš„ã€å…³è”æ€§æ¯”è¾ƒå¼ºçš„ï¼Œå°±æŠŠå®ƒä»¬å½“ä½œåŒä¸€ç§èŒè´£ï¼Œæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„ç±»ï¼ˆæ–‡ä»¶ï¼‰é‡Œã€‚</blue>

  Car å’Œ Trip è¦åˆ†å¼€,æå–å…¬å…±ä¿¡æ¯,ä»¥åä¿®æ”¹åªä¼šä¿®æ”¹ car æˆ–è€… trip,ä¸ä¼šç›¸äº’å…³è”

  ```js
    // æœ‰å¿«è½¦ å’Œ ä¸“è½¦  å¿«è½¦ 1å…ƒ ä¸“è½¦ 2å…ƒ ä¸€å…±5å…¬é‡Œ
    // è¡Œç¨‹å¼€å§‹ éœ€è¦æç¤ºè½¦ç‰Œå· è¡Œç¨‹ç»“æŸåæ˜¾ç¤ºç»“æŸä»·æ ¼
    class Car {
      constructor(name,number){
        this.name = name
        this.number = number
      }
    }

    class KuaiChe extends Car {
      constructor(name,number){
        super(name,number)
        this.price = 1
      }
    }

    class ZhuanChe extends Car {
      constructor(name,number){
        super(name,number)
        this.price = 1
      }
    }

    class Trip {
      constructor(car){
        this.car = car
      }
      start(){
        console.log(this.car.name,this.car.number);
      }
      end(){
        console.log(this.car.price * 5);
      }
    }

    const car = new KuaiChe('å¥”é©°',100)
    let trip = new Trip(car)
    trip.start()
    trip.end()
  ```



### 2. O--å¼€é—­åŸåˆ™ Open Closed Principle  
   **å¯¹æ‰©å±•å¼€æ”¾,å¯¹ä¿®æ”¹å°é—­**(å¯ä»¥æ‰©å±•,ä½†æ˜¯ä¸èƒ½ä¿®æ”¹åŸæ¥çš„,è¦ä¸è¿˜å¾—é‡æ–°æµ‹è¯•)å¢åŠ éœ€æ±‚æ—¶,æ‰©å±•æ–°ä»£ç ,è€Œéä¿®æ”¹å·²æœ‰ä»£ç 

   1. å‡å°‘æµ‹è¯•æˆæœ¬
   2. å¦‚æœå¤šäººå¼€å‘,ä¼šå½±å“å…¶ä»–äºº

### 3. L-- é‡Œæ°æ›¿æ¢åŸåˆ™ Liskov Substitution Principle 

  å­ç±»è¦†ç›–çˆ¶ç±» çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±èƒ½å‡ºç°,**ä¸æœŸæœ›è¡Œä¸ºä¸€è‡´çš„æ›¿æ¢** 

  ä¿—è¯è¯´,è€é¼ ç”Ÿçš„ä¼šæ‰“æ´,å°±æ˜¯ç¬¦åˆé‡Œå¼æ›¿æ¢åŸåˆ™,å¦‚æœè€é¼ ç”Ÿçš„ä¸ä¼šæ‰“æ´,ä¼šä¸Šå¤©,å°±è¿èƒŒäº†è¯¥åŸåˆ™  

  **å¦‚æœå­ç±»æœ‰è‡ªå·±çš„ç‰¹è‰²ï¼Œä¹Ÿå°±æ˜¯å¤šæ€ï¼Œå¦‚æœè¿™ä¸ªç‰¹è‰²å¤ªç‰¹è‰²çš„è¯ï¼Œå°±ä¼šç ´åé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚**

  å¦‚æœ"æˆ‘å¼€è½¦ä¸Šç­,åè½¦ä¸‹ç­",æ”¹æˆ"æˆ‘å¼€ç©å…·è½¦ä¸Šç­,åé¥æ§è½¦ä¸‹ç­",è¿™ä¸ªå­ç±»å°±ç ´åæ›¿æ¢åŸåˆ™

  **å­ç±»è¿‡äºç‰¹æ®Š,åº”è¯¥ç»†åŒ–çˆ¶ç±»æˆ–è€…å‰¥ç¦»æ¥å£**

å¯ä»¥è¿™æ ·ä¿®æ”¹
- æå–ä¸€ä¸ªå¯è½½äººçš„æ¥å£ interface IMannedï¼Œæ˜ç¡®è¡¨ç¤ºå“ªäº›è½¦å¯ä»¥è½½äººï¼›
- æå–ä¸€ä¸ªäºŒçº§çˆ¶ç±» class MannedCarï¼Œè¡¨ç¤ºè¯¥ç±»è½¦å¯ä»¥è½½äººã€‚


> é‡Œæ°ç½®æ¢åŸåˆ™å°±æ˜¯å¯¹ç»§æ‰¿çš„æ ¡éªŒï¼Œ<blue>ä¸æ°å½“çš„ç»§æ‰¿å…³ç³»å°±ä¸æ»¡è¶³é‡Œæ°ç½®æ¢åŸåˆ™</blue>  
> æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æ— æ³•ç¡®å®šæŸä¸¤ä¸ªç±»ä¹‹é—´æ˜¯å¦åº”è¯¥ç”¨ç»§æ‰¿å…³ç³»æ—¶ï¼Œå°±å¯ä»¥å¥—ç”¨é‡Œæ°ç½®æ¢åŸåˆ™æ¥æ ¡éªŒä¸‹ã€‚

### 4.D -- ä¾èµ–å€’ç½®åŸåˆ™ Dependence Inversion Principle  
  <blue>åªå…³æ³¨æ¥å£ä¸å…³æ³¨å…·ä½“å®ç°</blue>  
  é«˜å±‚ä¸åº”è¯¥ä¾èµ–åº•å±‚ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚

æˆ‘ä»¬åœ¨ä½¿ç”¨ç±»çš„æ—¶å€™ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æŠ½è±¡ç±»æˆ–æ¥å£ã€‚
```ts
// åªä¾èµ–äº girlFriend è¿™ä¸ªæ¥å£
  interface  girlFriend {
    name:string,
    age:number
  }

  class Coco implements girlFriend {
    name='zs';
    age=12
  }

  class Coco2 implements girlFriend {
    name='lsii';
    age=12
  }

  // å¦‚æœä¸æ˜¯çš„è¯,å°±è¦ åœ¨ SingleDog ä¸­ å°±è¦ new girlFriend
  class  SingleDog {
    constructor(public pro:girlFriend){
      // åªä¾èµ–äº girlFriend è¿™ä¸ªæ¥å£
      console.log(pro.age);
    }
  }

  var s1 = new SingleDog(new Coco)
```

å†æ¯”å¦‚ï¼Œç°åœ¨æˆ‘è¦æä¾›ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨ç§»åŠ¨ç«¯çš„ `MediaPlayer`ï¼Œå¾ˆå®¹æ˜“å°±å†™å‡ºäº†å¦‚ä¸‹ä»£ç ï¼š

```java
class MediaPlayer {
  Â public void play(String path) {}
  Â public void stop(){}
  Â public void pause(){}
  Â public void resume(){}
}
```
è°ƒç”¨

```java
class User {
Â private MediaPlayer mediaPlayer;

Â public void play(){
Â  Â mediaplayer.play("xxx");
 }
}
```
å¦‚æœæœ‰ä¸€å¤©è¦ä¿®æ”¹ä¸ºå…¶ä»–æ’­æ”¾å™¨,è¿˜éœ€è¦ä¿®æ”¹ `User` ç±»  

æ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠ½è±¡ä¸€ä¸ª `IPlayer` æ¥å£å‡ºæ¥ï¼Œç„¶å `User` ç±»ä¾èµ– `IPlayer` æ¥å£ï¼Œè¿™æ ·å°±è§£è€¦äº†ã€‚

```java
interface IPlayer {
Â void play(String path);
Â void stop();
Â void pause();
Â void resume();
}
```
ä½¿ç”¨
```java
class User {
Â private IPlayer player;

Â public void play(){
Â  Â  Â player.play("xxx");
 }
}
```

æ­¤æ—¶ `User` åªä¾èµ–äº `IPlayer`ï¼Œè€Œä¸ä¾èµ–å…·ä½“çš„å®ç°ã€‚  
ä¸ç®¡ä½ æ˜¯å•¥ï¼Œåªè¦å…·æœ‰æ’­æ”¾å™¨çš„åŠŸèƒ½å°±è¡Œï¼Œåé¢ä¸ç®¡ä½ æ€ä¹ˆæ”¹å˜ `IPlayer` çš„å®ç°ï¼Œ`User` éƒ½ä¸éœ€è¦æ”¹å˜

<blue>æ‰€ä»¥é¢å‘æ¥å£çš„å¥½å¤„ï¼šä½è€¦åˆï¼Œæ˜“æ‹“å±•ã€‚</blue>

### 5.æ¥å£ç‹¬ç«‹åŸåˆ™ Interface Segregation Principle 

```ts
  interface  Student {
    name:string,
    age:number,
    schoolName:string
  }

  let s:Student = {
    name:'zs',
    age:12,
    schoolName:'å°å­¦'
  }

  // è¿™ä¸ªåœ°æ–¹åº”è¯¥å†åˆ›å»ºä¸€ä¸ª æ–°çš„æ¥å£
  let p:Partial<Student> = {
    name:'tang',
    age:26
  }

  let p:Omit<Student,'schoolName'>= {
    name:'tang',
    age:26
  }

  // æœ€å¥½çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ª person æ¥å£,è®© student ç»§æ‰¿ person

  // æŠŠ schoolName å˜æˆå¯é€‰çš„,
  interface Student {
    name:string,
    age:number,
    schoolName:string
  }

  type C<T,K extends keyof T> = Pick<T,Exclude<keyof T,K>> & Partial<T>

  type D = C<Student,"schoolName">

  type CalType<T> = {
    [K in keyof T]:T[K]
  }

  type F = CalType<D>

  let s:CalType<D> = {
    name:'',
    age:20,
    schoolName:''
  }
```

æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨æ¥å£

```java
interface IPlayer {
 Â  Â //å¼€å§‹
 Â  Â void play(String url); 
 Â  Â //åœæ­¢
 Â  Â void stop();
 Â  Â //æš‚åœ
 Â  Â void pause();
 Â  Â //å¤åŸ
 Â  Â void resume();
 Â  Â //è·å–æ­Œæ›²æ—¶é•¿
 Â  Â String getSongTime();
}

```

è¿™æ­£æ˜¯å•ä¸€èŒè´£åŸåˆ™ï¼Œå› ä¸ºè¿™ä¸ªæ¥å£åªå®šä¹‰äº†éŸ³ä¹æ’­æ”¾ç›¸å…³çš„ä¸œè¥¿ï¼Œä½†æ˜¯å´ä¸æ»¡è¶³æ¥å£éš”ç¦»åŸåˆ™  

å› ä¸ºä¸€ä¸ªæ¥å£å¹²äº†å¤šä»¶äº‹  
å‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸ªæ­Œæ›²å±•ç¤ºå™¨ SongDisplayer,åªéœ€è¦å±•ç¤ºæ­Œæ›²çš„æ—¶é•¿ï¼Œä¹Ÿå°±æ˜¯åªéœ€è¦getSongTime()è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬è®©å®ƒç›´æ¥å®ç°IPlayeræ¥å£å—ï¼Ÿè‚¯å®šä¸è¡Œï¼å› ä¸ºé‡Œé¢çš„å…¶ä»–å‡½æ•°æ˜¯ä¸éœ€è¦çš„ï¼Œä¹Ÿä¸åº”è¯¥æœ‰çš„ã€‚è¿™å°±è¦ç”¨åˆ°æ¥å£éš”ç¦»åŸåˆ™äº†ï¼Œæˆ‘ä»¬ç›´æ¥å°†IPlayeræ¥å£å†è¿›è¡Œæ‹†åˆ†ï¼Œå¦‚ä¸‹ï¼š

```java
//éŸ³ä¹æ’­æ”¾å™¨å°±ä»…é™äºå¯¹æ’­æ”¾çš„æ§åˆ¶
interface IPlayer {
 Â  Â //å¼€å§‹
 Â  Â void play(String path); 
 Â  Â //åœæ­¢
 Â  Â void stop();
 Â  Â //æš‚åœ
 Â  Â void pause();
 Â  Â //å¤åŸ
 Â  Â void resume();
 Â   ...
}

//æ­Œæ›²å±•ç¤ºå™¨å°±ä»…é™äºå¯¹æ­Œæ›²ä¿¡æ¯çš„å±•ç¤º
interface ISongDisplayer {
 Â  Â //è·å–æ­Œæ›²æ—¶é•¿
 Â  Â String getSongTime();
 Â  Â //è·å–æ­Œæ›²åå­—
 Â  Â String getSongName();
 Â  Â //å…¶ä»–
 Â   ...
}
```

### 6.æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLKPï¼‰

> æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼Œç®€ç§° LKPï¼‰ï¼Œä¹Ÿå«è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLODï¼‰ï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ï¼Œè¯´ç™½äº†å°±æ˜¯ï¼Œåªå…³è”è‡ªå·±éœ€è¦çš„ã€‚

```java
interface IPlayer {
  void play(String path)
  ....
}

class User {
  ....
  void play(){
 Â  Â player.play(song.path);
  }
  ....
}

class Song {
  public String path;
  public String name;
  ....
}
```
å¯ä»¥çœ‹åˆ°ï¼Œæ’­æ”¾æ—¶ï¼Œåªéœ€è¦ä¸€ä¸ª path å³å¯ã€‚å¦‚æœæˆ‘ç›´æ¥æŠŠ Song ç»™ä»–ä¼ è¿‡å»ä¸è¡Œå—ï¼Ÿè¿™æ ·åé¢ä¸‡ä¸€éœ€è¦ Song é‡Œé¢çš„å…¶ä»–å˜é‡ï¼Œä¹Ÿæ— éœ€ä¿®æ”¹

**ä½†æ˜¯å¦‚æœä¸€é¦–æ­Œåªæœ‰è·¯å¾„ä½†æ˜¯æ²¡æœ‰åå­—,æ’­æ”¾å™¨ä¹Ÿè¦è·Ÿç€ä¿®æ”¹**  

å…¶å®æ’­æ”¾å™¨åªéœ€è¦ä¸€ä¸ªæ’­æ”¾çš„è·¯å¾„,è‡³äºå…¶ä»–çš„ï¼Œå®ƒæ ¹æœ¬ä¸å…³å¿ƒã€‚å¦‚æœçœŸçš„éœ€è¦ï¼Œä½ å†æä¾›ï¼Œä½†ä¹Ÿåªéœ€è¦æä¾›å®ƒéœ€è¦çš„ï¼Œä¸è¦æœ‰ä»»ä½•é™„åŠ å†…å®¹

<blue>æˆ‘ä»¬åº”è¯¥åªå…³è”è‡ªå·±ç›´æ¥ç”¨åˆ°çš„ï¼Œè€Œä¸å…³è”é‚£äº›ä¸éœ€è¦çš„ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œé‚£äº›å‘ç”Ÿåœ¨æˆ‘ä»¬å…³è”èŒƒå›´å¤–çš„äº‹ï¼Œå°±ä¸ä¼šå¼•èµ·æˆ‘ä»¬çš„ä»»ä½•æ”¹å˜ï¼Œè¿™æ ·å°±å¤§å¤§æå‡äº†ä»£ç çš„å¥å£®æ€§ã€‚</blue>

## â¤ï¸æ€»ç»“

1. å•ä¸€èŒè´£åŸåˆ™
 >  ä¸€ä¸ªå‡½æ•° / ä¸€ä¸ªç±» åªåšä¸€ä»¶äº‹ï¼Œæ ¹æ®å‡½æ•°åå»åšäº‹ï¼Œå¦‚æœä¸èƒ½å–ä¸€ä¸ªå¥½çš„å‡½æ•°åï¼Œè¯´æ˜è¿˜å¯ä»¥æ‹†åˆ†ã€‚
2. å¼€é—­åŸåˆ™
 >  æ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹å°é—­ï¼Œå¢åŠ éœ€æ±‚æ—¶ï¼Œæ‰©å±•æ–°ä»£ç ï¼Œè€Œéä¿®æ”¹åŸæœ‰ä»£ç ã€‚
3. é‡Œæ°æ›¿æ¢åŸåˆ™
> å­ç±»å¯ä»¥æ›¿æ¢çˆ¶ç±»ï¼Œæ¯”å¦‚ é¥æ§è½¦ ç»§æ‰¿è‡ª çˆ¶ç±»ï¼Œä½†æ˜¯ä¸èƒ½å¼€ï¼Œæ‰€ä»¥æ— æ³•æ‰§è¡Œçˆ¶ç±»çš„ `drive` æ–¹æ³•ï¼Œæ‰€ä»¥ä¸ç¬¦åˆï¼Œè¦æ‹†åˆ† 
4. ä¾èµ–å€’ç½®åŸåˆ™
> è¦ä¾èµ–äºæŠ½è±¡ç±»æˆ–è€…æ˜¯æ¥å£ï¼Œä¸è¦ä¾èµ–äºå…·ä½“å®ç°ã€‚å‡å°‘è€¦åˆ
5. æ¥å£ç‹¬ç«‹åŸåˆ™
> æ¥å£è¦å°½é‡ç»†åŒ–ï¼Œä¸è¦å¤ªå®½æ³›ã€‚è¦å°æ¥å£ï¼Œä¸è¦èƒ–æ¥å£
6. æœ€å°çŸ¥è¯†åŸåˆ™
> ä¸€ä¸ªå¯¹è±¡åªæ¥æ”¶è‡ªå·±æ‰€éœ€è¦çš„ï¼Œä¹Ÿå°±æ˜¯ä¼ å‚çš„æ—¶å€™è¦è§£æè¿‡çš„

<blue>ç›®çš„å°±æ˜¯ä¸ºäº†å†™å‡ºæ›´åŠ å®‰å…¨çš„ä»£ç ,è®¾è®¡åŸåˆ™æ˜¯ä¸Šé¢å‡ ç§ï¼Œè®¾è®¡æ¨¡å¼æ˜¯å…·ä½“å®ç°</blue>


æ€æƒ³å°±æ˜¯æŠ€å·§çš„é«˜åº¦æ€»ç»“å’Œå½’çº³

1. åˆ†å±‚æ€æƒ³
   >å°†é€»è¾‘åˆ†å±‚å¤„ç†ï¼Œä¸åŒå±‚å„å¸å…¶èŒï¼Œä»è€Œé™ä½ä»£ç è€¦åˆæ€§ï¼Œæé«˜æ‹“å±•æ€§ã€‚åˆ†å±‚æ€æƒ³å°±æ˜¯å®è§‚çš„å•ä¸€èŒè´£åŸåˆ™ã€‚
2. ç²’åº¦ç»†åŒ–æ€æƒ³
 > å°†åŠŸèƒ½æ‹†åˆ†æˆä¸€ä¸ªä¸ªæ›´å°çš„å°åŠŸèƒ½ï¼Œä»è€Œæé«˜åˆ©ç”¨ç‡ï¼Œé™ä½è€¦åˆæ€§ã€‚ç²’åº¦ç»†åŒ–æ€æƒ³å°±æ˜¯å®è§‚çš„æ¥å£éš”ç¦»å’Œæœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚
3. æ˜“å˜æ€§æ€æƒ³
 > é‡‡ç”¨æ˜“å˜çš„æ•°æ®ç±»å‹å’Œæ¥å£ï¼Œæ¥å°†ä»£ç å†™æˆå®¹æ˜“ä¿®æ”¹çš„ï¼Œä»è€Œæé«˜æ‹“å±•æ€§ã€‚æ˜“å˜æ€§æ€æƒ³å°±æ˜¯å®è§‚çš„ä¾èµ–å€’ç½®åŸåˆ™ã€‚ 
è¿™ç§å°±æ˜¯ æ˜“å˜æ€§æ€æƒ³ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å˜åŒ–
```java
// å®šä¹‰ä¸€ä¸ªmap
Map<String, Runnable> actions = new HashMap();

// å°†keyå’Œvalueå­˜æ”¾åœ¨mapä¸­
actions.put("Java", {doJava()})
actions.put("javascript", {doJS()})
actions.put("python", {doPython()})

public void handleInput(String input) {
    if(actions.containsKey(input)) {
        actions.get(input).run();
    }
}
```

æ¯ä¸€ç§æ€æƒ³éƒ½æ˜¯å¤šç§è®¾è®¡åŸåˆ™çš„ä½“ç°,åªéœ€è¦æ»¡è¶³ï¼š`æ‹“å±•æ€§å¼ºï¼Œå½±å“èŒƒå›´å°`ã€‚

## å¯¹è±¡ä¸‰è¦ç´ 

### å°è£…
 
#### å°è£…æ•°æ®

åœ¨è®¸å¤šè¯­è¨€çš„å¯¹è±¡ç³»ç»Ÿä¸­,å°è£…æ•°æ®æ˜¯ç”±è¯­æ³•è§£ææ¥å®ç°çš„,è¿™äº›è¯­è¨€ä¹Ÿè®¸æä¾›äº† **privateã€ publicã€protected** ç­‰å…³é”®å­—æ¥æä¾›ä¸åŒçš„è®¿é—®æƒé™

**JavaScript ä¾èµ–å˜é‡çš„ä½œç”¨åŸŸæ¥å®ç°å°è£…ç‰¹æ€§**

```js
  var myObject = (function(){
    var __name = 'sven'; // ç§æœ‰ï¼ˆprivateï¼‰å˜é‡
    return {
      getName: function(){ // å…¬å¼€ï¼ˆpublicï¼‰æ–¹æ³•
        return __name;
      }
    }
  })();

  console.log( myObject.getName() ); // è¾“å‡ºï¼šsven
  console.log( myObject.__name ) // è¾“å‡ºï¼šundefined
```

#### å°è£…å®ç°

å¯¹è±¡å¯¹å®ƒè‡ªå·±çš„è¡Œä¸ºè´Ÿè´£ã€‚å…¶ä»–å¯¹è±¡æˆ–è€…ç”¨æˆ·éƒ½ä¸å…³å¿ƒå®ƒçš„å†…éƒ¨å®ç°ã€‚å°è£…ä½¿å¾—å¯¹è±¡ä¹‹é—´çš„è€¦åˆå˜æ¾æ•£

**å¯¹è±¡ä¹‹é—´åªé€šè¿‡æš´éœ²çš„ API æ¥å£æ¥é€šä¿¡**ã€‚å½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡æ—¶,å¯ä»¥éšæ„åœ°ä¿®æ”¹å®ƒçš„å†…éƒ¨å®ç°,åªè¦å¯¹å¤–çš„æ¥å£æ²¡æœ‰å˜åŒ–,å°±ä¸ä¼šå½±å“åˆ°ç¨‹åºçš„å…¶ä»–åŠŸèƒ½

æ‹¿è¿­ä»£å™¨æ¥è¯´æ˜,æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ª each å‡½æ•°,å®ƒçš„ä½œç”¨å°±æ˜¯éå†ä¸€ä¸ªèšåˆå¯¹è±¡,ä½¿ç”¨è¿™ä¸ª each å‡½æ•°çš„äººä¸ç”¨å…³å¿ƒå®ƒçš„å†…éƒ¨æ˜¯æ€æ ·å®ç°çš„,åªè¦å®ƒæä¾›çš„åŠŸèƒ½æ­£ç¡®ä¾¿å¯ä»¥ã€‚å³ä½¿ each å‡½æ•°ä¿®æ”¹äº†å†…éƒ¨æºä»£ç ,åªè¦å¯¹å¤–çš„æ¥å£æˆ–è€…è°ƒç”¨æ–¹å¼æ²¡æœ‰å˜åŒ–,ç”¨æˆ·å°±ä¸ç”¨å…³å¿ƒå®ƒå†…éƒ¨å®ç°çš„æ”¹å˜

#### å°è£…å˜åŒ–

æ‰¾åˆ°å˜åŒ–å¹¶å°è£…ä¹‹ ===> åˆ›å»ºå‹æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼å’Œè¡Œä¸ºå‹æ¨¡å¼

**é€šè¿‡å°è£…å˜åŒ–çš„æ–¹å¼,æŠŠç³»ç»Ÿä¸­ç¨³å®šä¸å˜çš„éƒ¨åˆ†å’Œå®¹æ˜“å˜åŒ–çš„éƒ¨åˆ†éš”ç¦»å¼€æ¥**  

åœ¨ç³»ç»Ÿçš„æ¼”å˜è¿‡ç¨‹ä¸­, æˆ‘ä»¬åªéœ€è¦**æ›¿æ¢é‚£äº›å®¹æ˜“å˜åŒ–**çš„éƒ¨åˆ†,å¦‚æœè¿™äº›éƒ¨åˆ†æ˜¯å·²ç»å°è£…å¥½çš„,æ›¿æ¢èµ·æ¥ä¹Ÿç›¸å¯¹å®¹æ˜“ã€‚è¿™å¯ä»¥æœ€å¤§ç¨‹åº¦åœ°ä¿è¯ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯æ‰©å±•æ€§ã€‚

### å¤šæ€

**åŒä¸€æ“ä½œä½œç”¨äºä¸åŒçš„å¯¹è±¡ä¸Šé¢,å¯ä»¥äº§ç”Ÿä¸åŒçš„è§£é‡Šå’Œä¸åŒçš„æ‰§è¡Œç»“æœ**

```js
 var makeSound = function( animal ){
	if ( animal instanceof Duck ){
		console.log( 'å˜å˜å˜' );
	}else if ( animal instanceof Chicken ){
		console.log( 'å’¯å’¯å’¯' );
	}
};

var Duck = function(){};
var Chicken = function(){};
makeSound( new Duck() ); // å˜å˜å˜
makeSound( new Chicken() );
```

å¤šæ€èƒŒåçš„æ€æƒ³æ˜¯å°† `"åšä»€ä¹ˆ"` å’Œ `"è°å»åšä»¥åŠæ€æ ·å»åš"` åˆ†ç¦»å¼€æ¥,ä¹Ÿå°±æ˜¯å°† `"ä¸å˜çš„äº‹ç‰©"` ä¸ `"å¯èƒ½æ”¹å˜çš„äº‹ç‰©"` åˆ†ç¦»å¼€æ¥ã€‚

åœ¨è¿™ä¸ªæ•…äº‹ä¸­,åŠ¨ç‰©éƒ½ä¼šå«,è¿™æ˜¯ä¸å˜çš„,ä½†æ˜¯ä¸åŒç±»å‹çš„åŠ¨ç‰©å…·ä½“æ€ä¹ˆå«æ˜¯å¯å˜çš„ã€‚æŠŠä¸å˜çš„éƒ¨åˆ†éš”ç¦»å‡ºæ¥,æŠŠå¯å˜çš„éƒ¨åˆ†å°è£…èµ·æ¥

é¦–å…ˆæˆ‘ä»¬æŠŠä¸å˜çš„éƒ¨åˆ†éš”ç¦»å‡ºæ¥,é‚£å°±æ˜¯æ‰€æœ‰çš„åŠ¨ç‰©éƒ½ä¼šå‘å‡ºå«å£°

```js
  var makeSound = function( animal ){
    animal.sound();
  };
```

æŠŠå¯å˜çš„éƒ¨åˆ†å„è‡ªå°è£…èµ·æ¥,æˆ‘ä»¬åˆšæ‰è°ˆåˆ°çš„å¤šæ€æ€§å®é™…ä¸ŠæŒ‡çš„æ˜¯å¯¹è±¡çš„å¤šæ€æ€§

```js
  var Duck = function(){}

  Duck.prototype.sound = function(){
    console.log( 'å˜å˜å˜' );
  };

  var Chicken = function(){}

  Chicken.prototype.sound = function(){
    console.log( 'å’¯å’¯å’¯' );
  };

  makeSound( new Duck() ); // å˜å˜å˜
  makeSound( new Chicken() ); // å’¯å’¯å’¯
```

å¤šæ€æœ€æ ¹æœ¬çš„ä½œç”¨å°±æ˜¯é€šè¿‡æŠŠè¿‡ç¨‹åŒ–çš„ ***æ¡ä»¶åˆ†æ”¯è¯­å¥è½¬åŒ–ä¸ºå¯¹è±¡çš„å¤šæ€æ€§***,ä»è€Œæ¶ˆé™¤è¿™äº›æ¡ä»¶åˆ†æ”¯è¯­å¥

æ¡ä»¶è¯­å¥å°±æ˜¯ä¸Šæ–‡è¯´çš„ ifelse åˆ¤æ–­æ˜¯ä¸æ˜¯ animal instanceof Duck,å¯¹è±¡çš„å¤šæ€æ€§å°±æ˜¯å£°æ˜ä¸åŒçš„å¯¹è±¡åœ¨å¯¹è±¡èº«ä¸Šç»‘å®šæ–¹æ³• å°† ***è¡Œä¸ºåˆ†å¸ƒåœ¨å„ä¸ªå¯¹è±¡ä¸­,å¹¶è®©è¿™äº›å¯¹è±¡å„è‡ªè´Ÿè´£è‡ªå·±çš„è¡Œä¸º*** 


```js
  var googleMap = {
    show: function(){
      console.log( 'å¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾' );
    }
  };

  var renderMap = function(){
    googleMap.show();
  };
  renderMap(); // è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾
```

åæ¥å› ä¸ºæŸäº›åŸå› ,è¦æŠŠè°·æ­Œåœ°å›¾æ¢æˆç™¾åº¦åœ°å›¾,ä¸ºäº†è®© renderMap å‡½æ•°ä¿æŒä¸€å®šçš„å¼¹æ€§, æˆ‘ä»¬ç”¨ä¸€äº›æ¡ä»¶åˆ†æ”¯æ¥è®© renderMap å‡½æ•°åŒæ—¶æ”¯æŒè°·æ­Œåœ°å›¾å’Œç™¾åº¦åœ°å›¾

```js
var googleMap = {
  show: function(){
    console.log( 'å¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾' );
  }
};

var baiduMap = {
  show: function(){
    console.log( 'å¼€å§‹æ¸²æŸ“ç™¾åº¦åœ°å›¾' );
  }
};

var renderMap = function( type ){
  if ( type === 'google' ){
    googleMap.show();
  } else if ( type === 'baidu' ){
    baiduMap.show();
  }
};

renderMap( 'google' ); // è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾
renderMap( 'baidu' ); // è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“ç™¾åº¦åœ°å›¾
```

ä»¥åå¦‚æœå¢åŠ åœ°å›¾,éœ€è¦ä¿®æ”¹`renderMap` æ–¹æ³•,è¿æ³•äº†å¼€é—­åŸåˆ™,æŠŠ ã€Œæ¸²æŸ“æ–¹æ³•ã€ æŠ½ç¦»å‡ºæ¥

```js
  var renderMap = function( map ){
	if ( map.show instanceof Function ){
		map.show();
	}
};

renderMap( googleMap ); // è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾
renderMap( baiduMap ); // è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“ç™¾åº¦åœ°å›¾
```

"åšä»€ä¹ˆ"å’Œ"æ€ä¹ˆå»åš"æ˜¯å¯ä»¥åˆ†å¼€çš„,æ€ä¹ˆå»åšç»‘å®šåœ¨äº†è‡ªå·±çš„èº«ä¸Š,ä»¥ååªéœ€å˜åŒ–è‡ªå·±å†…éƒ¨ç»“æ„å³å¯,åªè¦å¯¹å¤–æš´éœ²å‡ºæ¥çš„apiä¸å˜  

åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ`åšä»€ä¹ˆ` æŒ‡çš„æ˜¯ `show` æ–¹æ³•, `æ€ä¹ˆå»åš` æŒ‡çš„æ˜¯ `googleMap` å’Œ `baiduMap` å¯¹è±¡ä¸­å†…å®¹çš„ ã€Œ å±•ç¤º ã€ æ–¹æ³•

å³ä½¿ä»¥åå¢åŠ äº†æœæœåœ°å›¾,renderMap å‡½æ•°ä»ç„¶ä¸éœ€è¦åšä»»ä½•æ”¹å˜

```js
var sosoMap = {
  show: function(){
    console.log( 'å¼€å§‹æ¸²æŸ“æœæœåœ°å›¾' );
  }
};
renderMap( sosoMap ); // è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“æœæœåœ°å›¾
```

ğŸ„æŠŠæ¡ä»¶è¯­å¥æŠ½ç¦»å‡ºæ¥,ä½¿ç”¨å¯¹è±¡çš„å¤šæ€, ***è®©å¯¹è±¡è‡ªå·±è´Ÿè´£è‡ªå·±çš„è¡Œä¸º,åŒæ ·çš„æ“ä½œä¸åŒçš„æ•ˆæœ***

## å·¥å‚æ¨¡å¼

éœ€è¦å¤§é‡åˆ›å»ºæŸä¸ªå¯¹è±¡çš„æ—¶å€™,é€šè¿‡è°ƒç”¨å·¥å‚æ–¹æ³•,æ¥åˆ›å»ºç›¸ä¼¼çš„ç±»,ä¸ç”¨æˆ‘ä»¬å…·ä½“åˆ›å»º

å½“ä½ ä½¿ç”¨ new çš„æ—¶å€™,å°±åº”è¯¥è€ƒè™‘åˆ° ä½¿ç”¨ å·¥å‚æ¨¡å¼


<img src="@img/å·¥å‚æ¨¡å¼.webp"/>


```js

window.$ = function(selector){
	return new JQuery(selector)
}

class Jquery {
	constructor(selector){
		this.selector = selector;
	}
	append(){}
	add(){}
}
```

## åŸå‹é“¾æ¨¡å¼
<img src="@img/åŸå‹æ¨¡å¼.webp"/>

```js
  var Plane = function(){
    this.blood = 100;
    this.attackLevel = 1;
    this.defenseLevel = 1;
  };

  var plane = new Plane();
  plane.blood = 500;
  plane.attackLevel = 10;
  plane.defenseLevel = 7;
  var clonePlane = Object.create( plane );
  console.log( clonePlane );
```

## ğŸš© ç­–ç•¥æ¨¡å¼

ç­–ç•¥æ¨¡å¼æŒ‡çš„æ˜¯å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥,å°±æ˜¯æŠŠ **é€»è¾‘å’Œå…·ä½“åˆ†æ”¯éƒ¨åˆ†è¦åšçš„äº‹æƒ…åˆ†å¼€**

<img src="@img/ç­–ç•¥æ¨¡å¼.webp"/>

```js
// ç­–ç•¥ç±»
var strategies = {
	"S": function( salary ){
		return salary * 4;
	},
	"A": function( salary ){
		return salary * 3;
	},
	"B": function( salary ){
		return salary * 2;
	}
};
// ç¯å¢ƒç±» Context  ,æŠŠ è¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»
// æ¯ä¸ªç­–ç•¥å¯¹è±¡è´Ÿè´£çš„ç®—æ³•å·²è¢«å„è‡ªå°è£…åœ¨å¯¹è±¡å†…éƒ¨
var calculateBonus = function( level, salary ){
	return strategies[ level ]( salary );
};

console.log( calculateBonus( 'S', 20000 ) ); // è¾“å‡ºï¼š80000
console.log( calculateBonus( 'A', 10000 ) ); // è¾“å‡ºï¼š30000
```

## ä»£ç†æ¨¡å¼

ä»£ç†æ¨¡å¼æ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡æä¾› [ *ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦* ],ä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®  
***è™šæ‹Ÿä»£ç†æŠŠä¸€äº›å¼€é”€å¾ˆå¤§çš„å¯¹è±¡,å»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»º***

<img src="@img/ä»£ç†æ¨¡å¼.webp"/>

### è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡é¢„åŠ è½½

åœ¨å›¾ç‰‡è¢«çœŸæ­£åŠ è½½å¥½ä¹‹å‰,é¡µé¢ä¸­ å°†å‡ºç°ä¸€å¼ å ä½çš„èŠèŠ±å›¾ loading.gif, æ¥æç¤ºç”¨æˆ·å›¾ç‰‡æ­£åœ¨åŠ è½½

```js
  var myImage = (function(){
    var imgNode = document.createElement( 'img' );
    document.body.appendChild( imgNode );
    return {
      setSrc: function( src ){
        imgNode.src = src;
      }
    }
  })();

var proxyImage = (function(){
	var img = new Image;
	img.onload = function(){
    // é‡æ–°èµ‹å€¼
		myImage.setSrc( this.src );
	}
	return {
		setSrc: function( src ){
      // å…ˆè®¾ç½® gif åŠ¨å›¾ï¼Œå› ä¸ºæ˜¯æœ¬åœ°å›¾ç‰‡,æ‰€ä»¥åŠ è½½é€Ÿåº¦å¾ˆå¿«
			myImage.setSrc( 'file:// /C:/Users/svenzeng/Desktop/loading.gif' );
      // è®¾ç½®çœŸå®åœ°å€
			img.src = src;
		}
	}
})();
// myImage å’Œ img.src åŒæ—¶è¿›è¡Œèµ‹å€¼
// myImage è¢«ä»£ç†,ä½¿ç”¨ ä¸€ä¸ªè™šæ‹Ÿå¯¹è±¡img è¿›è¡Œä»£ç†
proxyImage.setSrc( 'http:// imgcache.qq.com/music/photo/k/000GGDys0yA0Nk.jpg' );
```

æˆ‘ä»¬é€šè¿‡ proxyImage é—´æ¥åœ°è®¿é—® MyImageã€‚proxyImage æ§åˆ¶äº†å®¢æˆ·å¯¹ MyImage çš„è®¿é—®,å¹¶ä¸”åœ¨æ­¤è¿‡ç¨‹ä¸­åŠ å…¥ä¸€äº›é¢å¤–çš„æ“ä½œ,æ¯”å¦‚åœ¨çœŸæ­£çš„å›¾ç‰‡åŠ è½½å¥½ä¹‹å‰,å…ˆæŠŠ img èŠ‚ç‚¹çš„ src è®¾ç½®ä¸º ä¸€å¼ æœ¬åœ°çš„ loading å›¾ç‰‡

### è™šæ‹Ÿä»£ç†åœ¨æƒ°æ€§åŠ è½½ä¸­çš„åº”ç”¨

miniConsole.js çš„ä»£ç é‡å¤§æ¦‚æœ‰ 1000 è¡Œå·¦å³,ä¹Ÿè®¸æˆ‘ä»¬å¹¶ä¸æƒ³ä¸€å¼€å§‹å°±åŠ è½½è¿™ä¹ˆå¤§çš„ JS æ–‡ä»¶, å› ä¸ºä¹Ÿè®¸å¹¶ä¸æ˜¯æ¯ä¸ªç”¨æˆ·éƒ½éœ€è¦æ‰“å° logã€‚æˆ‘ä»¬å¸Œæœ›åœ¨æœ‰å¿…è¦çš„æ—¶å€™æ‰å¼€å§‹åŠ è½½å®ƒ,æ¯”å¦‚å½“ç”¨æˆ· æŒ‰ä¸‹ F2 æ¥ä¸»åŠ¨å”¤å‡ºæ§åˆ¶å°çš„æ—¶å€™ åœ¨ miniConsole.js åŠ è½½ä¹‹å‰,ä¸ºäº†èƒ½å¤Ÿè®©ç”¨æˆ·æ­£å¸¸åœ°ä½¿ç”¨é‡Œé¢çš„ API

é€šå¸¸æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ æ˜¯ç”¨ä¸€ä¸ªå ä½çš„ miniConsole ä»£ç†å¯¹è±¡æ¥ç»™ç”¨æˆ·æå‰ä½¿ç”¨,è¿™ä¸ªä»£ç†å¯¹è±¡æä¾›ç»™ç”¨æˆ·çš„æ¥å£,è·Ÿå®é™…çš„ miniConsole æ˜¯ä¸€æ ·çš„ã€‚

ç”¨æˆ·ä½¿ç”¨è¿™ä¸ªä»£ç†å¯¹è±¡æ¥æ‰“å° log çš„æ—¶å€™,å¹¶ä¸ä¼šçœŸæ­£åœ¨æ§åˆ¶å°å†…æ‰“å°æ—¥å¿—,æ›´ä¸ä¼šåœ¨é¡µé¢ä¸­åˆ›å»ºä»»ä½• DOM èŠ‚ç‚¹ã€‚å³ä½¿æˆ‘ä»¬æƒ³è¿™æ ·åšä¹Ÿæ— èƒ½ä¸ºåŠ›,å› ä¸ºçœŸæ­£çš„ miniConsole.js è¿˜æ²¡æœ‰è¢«åŠ è½½

è¯·æ±‚çš„åˆ°åº•æ˜¯ä»€ä¹ˆå¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸é€æ˜çš„,ç”¨æˆ·å¹¶ä¸æ¸…æ¥šå®ƒè¯·æ±‚çš„æ˜¯ä»£ç†å¯¹è±¡,æ‰€ä»¥ä»–å¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ”¾å¿ƒåœ°ä½¿ç”¨ miniConsole å¯¹è±¡

```js
// æœªåŠ è½½çœŸæ­£çš„ miniConsole.js ä¹‹å‰çš„ä»£ç å¦‚ä¸‹ï¼š
var cache = [];
var miniConsole = {
	log: function(){
		var args = arguments;
		cache.push( function(){
			return miniConsole.log.apply( miniConsole, args );
		});
	}
};
miniConsole.log(1);
```

å½“ç”¨æˆ·æŒ‰ä¸‹ F2 æ—¶,å¼€å§‹åŠ è½½çœŸæ­£çš„ miniConsole.js

```js
  var handler = function( ev ){
    if ( ev.keyCode === 113 ){
      var script = document.createElement( 'script' );
      script.onload = function(){
        for ( var i = 0, fn; fn = cache[ i++ ]; ){
          fn();
        }
      };
      script.src = 'miniConsole.js';
      document.getElementsByTagName( 'head' )[0].appendChild( script );
    }
};
document.body.addEventListener( 'keydown', handler, false );

// miniConsole.js ä»£ç ï¼š
miniConsole = {
  log: function(){
    // çœŸæ­£ä»£ç ç•¥
    console.log( Array.prototype.join.call( arguments ) );
  }
};
```

è¿™ä¸ªå¾ˆæœ‰å¯å‘,**å¯¹äºä¸€äº›éœ€è¦ç‰¹å®šæ—¶æœºæ‰å¯ä»¥æ‰§è¡Œçš„æ–¹æ³•,å¯ä»¥ä½¿ç”¨ä»£ç†**

## â¤ï¸ å‘å¸ƒè®¢é˜…æ¨¡å¼

**ä¸»é¢˜ä¸è§‚å¯Ÿè€…åˆ†ç¦»,ä¸æ˜¯ä¸»åŠ¨è§¦å‘,è€Œæ˜¯è¢«åŠ¨ç›‘å¬**

> ä½ ååœ¨ KFC é‡Œ,åº—å‘˜è¦è®°å½•( attach )ä½ , å½“é£Ÿç‰©åšå¥½äº†,åº—å‘˜ ä¼šé€šçŸ¥(notifyObserverAll),ç„¶åç”¨æˆ·æ‰‹ä¸­çš„é¢†å·ç‰Œ ä¼šå‘å‡ºå£°éŸ³(update) ç”¨æˆ·ç›¸å½“äº è®¢é˜…è€…,åº—å‘˜æ˜¯ å‘å¸ƒè€…

<img src="@img/è§‚å¯Ÿè€…æ¨¡å¼.webp"/>

```js
// å‘å¸ƒè€…
class Subject {
	constructor(){
		this.observers = [];
		this.state = 0
	}
	getState(){
		return this.state
	}
	setState(value){
		this.state = value;
		// é€šçŸ¥è§‚å¯Ÿè€…ä»¬
		this.notifyObserverAll()
	}

	notifyObserverAll(){
		this.observers.forEach(observer=>{
			// ç”¨æˆ·æ‰‹ä¸­çš„é“ƒé“› è§¦å‘
			observer.update()
		})
	}

	attach(observer){
		this.observers.push(observer)
	}
}

// è§‚å¯Ÿè€…
class Observer {
	constructor(name,subject){
		this.name = name
		this.subject = subject
		// æŠŠè‡ªå·± push è¿›å» Subject
		this.subject.attach(this)
	}

	update() {
		console.log(`${this.name}${this.subject.getState()}`);
	}
}
// åº—å‘˜
let s =new Subject()
// é¡¾å®¢
let o1 = new Observer('o2',s)
// ä¹Ÿå¯ä»¥,è¿™æ ·ä¸è¿‡æ˜¯éœ€è¦å¤–éƒ¨è°ƒç”¨ attach æ–¹æ³•
let s =new Subject()
let o1 = new Observer('o2')
s.attach(o1)

s.setState(1)
```

### ğŸŒ²ç»¼åˆä¾‹å­

åœ¨å†™è§‚å¯Ÿè€…æ¨¡å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€å®šè¦æ³¨æ„ `æœ€å°‘çŸ¥è¯†åŸåˆ™` å’Œ `ä¾èµ–å€’ç½®åŸåˆ™`ï¼Œæˆ‘ä»¬çš„è§‚å¯Ÿè€…æ¨¡å¼å°½é‡å®šä¹‰æˆæ¥å£ï¼Œå¹¶ä¸”ä¸€å®šè¦ç¼©å°èŒƒå›´ï¼Œè¿™æ ·æ–¹ä¾¿æ‹“å±•ã€‚
```java
// è§‚å¯Ÿè€…å®šä¹‰æˆäº†å¯¹è±¡ï¼Œè€Œä¸”æœ‰å¾ˆå¤šæ²¡ç”¨çš„æ–¹æ³•
class Teacher {
  public void notify(String msg){}
  
  public void teach() {}
  
  public void write() {}
}

class Student {
  // æ·»åŠ è§‚å¯Ÿè€…ï¼Œç›´æ¥ä¼ é€’äº†å…·ä½“çš„å¯¹è±¡ï¼šTeacher
  public void addObserver(Teacher observer) {
      if(observers.contains(observer)) return;
      observers.add(observer);
  }
  
  // è‡ªå·±å‘ç”Ÿå˜åŠ¨
  private void selfChange() {
      // é€šçŸ¥è§‚å¯Ÿè€…ï¼Œåªéœ€è¦ç”¨åˆ°notify()æ–¹æ³•
      observers.forEach {
          it.notify("å¯¡äººæ”¹å˜äº†ï¼Œé€šçŸ¥ä½ ä¸€ä¸‹");
      }
  }
}
```

1. é¦–å…ˆæŠŠè§‚å¯Ÿè€…å®šä¹‰æˆäº†å…·ä½“å¯¹è±¡ï¼Œè€Œä¸”é‡Œé¢æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬çš„è¢«è§‚å¯Ÿè€…åªéœ€è¦è°ƒç”¨ `notify()` å°±è¶³å¤Ÿäº†ï¼Œä¸éœ€è¦çŸ¥é“å…¶ä»–çš„æ–¹æ³•ï¼Œè¿™è¿èƒŒäº† `æœ€å°‘çŸ¥è¯†åŸåˆ™`
2. è¢«è§‚å¯Ÿè€…çš„ `addObserver()` ä¸­ï¼Œä¾èµ–äº†å…·ä½“å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¥å£ï¼Œè¿™å°±æ„å‘³ç€ä¸å¥½æ‹“å±•ï¼Œä¸‡ä¸€å°†æ¥éœ€è¦è®©æ ¡é•¿ã€ç­é•¿ä¹Ÿå¯ä»¥è§‚å¯Ÿå‘¢ï¼Ÿè¿™è¿èƒŒäº†ä¾èµ–å€’ç½®åŸåˆ™

```java
// å®šä¹‰è§‚å¯Ÿè€…æœ€å°æ¥å£
interface Observer {
 public void notify(String msg)
}

// è€å¸ˆå®ç°è§‚å¯Ÿè€…æ¥å£å°±è¡Œäº†
class Teacher implements Observer{
 public void notify(String msg){}
 
 public void teach() {}
 
 public void write() {}
}

class Student {
 // æ·»åŠ è§‚å¯Ÿè€…ï¼Œä¼ é€’æ¥å£
 public void addObserver(Observer observer) {
     if(observers.contains(observer)) return;
     observers.add(observer);
 }
 
 // è‡ªå·±å‘ç”Ÿå˜åŠ¨
 private void selfChange() {
     // é€šçŸ¥è§‚å¯Ÿè€…ï¼Œåªéœ€è¦ç”¨åˆ°notify()æ–¹æ³•
     observers.forEach {
         it.notify("å¯¡äººæ”¹å˜äº†ï¼Œé€šçŸ¥ä½ ä¸€ä¸‹");
     }
 }
}
```
ä»…ä»…éœ€è¦æŠ½ç¦»å‡ºä¸€ä¸ªæ¥å£ï¼ŒæŠŠéœ€è¦ç”¨åˆ°ä»€ä¹ˆå‡½æ•°å®šä¹‰åˆ°æ¥å£é‡Œé¢å³å¯ï¼Œå°†æ¥æ ¡é•¿ã€ç­é•¿ä¹Ÿæƒ³è§‚å¯Ÿï¼Œç›´æ¥å®ç°æ¥å£å³å¯ï¼Œæ˜¯ä¸æ˜¯æ›´ OCP äº†?



### Dom äº‹ä»¶

dom è®¢é˜…ä¸€ä¸ªäº‹ä»¶,ç­‰åˆ°æœ‰äº¤äº’å‘ç”Ÿè§¦å‘è®¢é˜…äº‹ä»¶

```js
document.body.addEventListener( 'click', function(){
  alert(2)
}, false );
```

```js
  let pubSub = {
  subs: [],
  subscribe(key, fn) { //è®¢é˜…
    if (!this.subs[key]) {
      this.subs[key] = [];
    }
    this.subs[key].push(fn);
  },

  publish(...arg) {//å‘å¸ƒ
    let args = arg;
    // å»é™¤å‘å¸ƒåç§°ï¼Œå‰©ä¸‹çš„éƒ½æ˜¯å‚æ•°
    let key = args.shift();
    let fns = this.subs[key];

    if (!fns || fns.length <= 0) return;

    for (let i = 0, len = fns.length; i < len; i++) {
      fns[i](args);
    }
  },
  unSubscribe(key) {
    delete this.subs[key]
  }
}

//æµ‹è¯•
pubSub.subscribe('name', name => {
  console.log(`your name is ${name}`);
})
pubSub.subscribe('gender', gender => {
  console.log(`your name is ${gender}`);
})
pubSub.publish('name', 'leaf333');  // your name is leaf333
pubSub.publish('gender', '18');  // your gender is 18
```

## å‘½ä»¤æ¨¡å¼

æˆ‘æ˜¯ä¸€ä¸ªå°†å†›,æˆ‘éœ€è¦æ‰§è¡Œæ“ä½œ,ä½†æ˜¯å£«å…µå¤ªå¤š,æˆ‘æŠŠå‘½ä»¤ç»™å°å·æ‰‹,å°å·æ‰‹è´Ÿè´£å‘å¸ƒå‘½ä»¤ã€‚å°å·æ‰‹æ‰§è¡Œæ“ä½œç»™å£«å…µ,å£«å…µå»æ‰§è¡Œ

å‘½ä»¤æ¨¡å¼æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯æ˜¯ï¼š**æœ‰æ—¶å€™éœ€è¦å‘æŸäº›å¯¹è±¡å‘é€è¯·æ±‚,ä½†æ˜¯å¹¶ä¸çŸ¥é“è¯·æ±‚çš„æ¥æ”¶è€…æ˜¯è°,ä¹Ÿä¸çŸ¥é“è¢«è¯·æ±‚çš„æ¥æ”¶è€…çš„æ“ä½œæ˜¯ä»€ä¹ˆã€‚** æ­¤æ—¶å¸Œæœ›ç”¨ä¸€ç§æ¾è€¦åˆçš„æ–¹å¼æ¥è®¾è®¡ç¨‹åº,ä½¿å¾—è¯·æ±‚å‘é€è€…å’Œè¯·æ±‚æ¥æ”¶è€…èƒ½å¤Ÿæ¶ˆé™¤å½¼æ­¤ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚

<img src="@img/å‘½ä»¤æ¨¡å¼.webp"/>

### ä¾‹å­ 1

```js
// å°å…µ,åªæœ‰æ“ä½œ
class Car {
    start () {
        return 'èµ·æ­¥'
    }
    turnLeft () {
        return 'å·¦è½¬'
    }
    turnRight () {
        return 'å³è½¬'
    }
    gotStraight () {
        return 'ç›´è¡Œ'
    }
    stop () {
        return 'é è¾¹åœè½¦'
    }
}

// ç±»ä¼¼äº å°å·æ‰‹çš„ä½œç”¨,æ¥å—å‘½ä»¤,å¹¶ä¸”è¿›è¡Œå°è£…ä¹‹å ä¼ é€’ç»™ car
class Command {
    constructor(car) {
        this.car = car
    }
    start () {
        console.log(`${this.car.start()}`)
    }
    left () {
        console.log(`${this.car.turnLeft()}`)
    }
    right () {
        console.log(`${this.car.turnRight()}`)
    }
    straight () {
        console.log(this.car.gotStraight())
    }
    end () {
        console.log(`${this.car.gotStraight()} ${this.car.stop()}`)
    }
    exec (cmd) {
        if (!this[cmd]) return false
        return this[cmd]()
    }
}

// ç±»ä¼¼äºå°†å†›
class Invoker {
    constructor(command) {
        this.command = command
    }
    invoke (cmd) {
        this.command.exec(cmd)
    }
}

const car = new Car()
// æ§åˆ¶å°è½¦çš„å‘½ä»¤
const command = new Command(car)

const routes = [
    'start',
    'straight',
    'left',
    'end'
]
const invoker = new Invoker(command)

routes.forEach(route => {
    invoker.invoke(route)
})
```

## æ¨¡æ¿æ–¹æ³•æ¨¡å¼

æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§ , åªéœ€ä½¿ç”¨ç»§æ‰¿å°±å¯ä»¥å®ç°çš„éå¸¸ç®€å•çš„æ¨¡å¼ã€‚ç›¸å½“äºä½ å†™å¥½ä¸€ä¸ªæ¨¡æ¿,è·Ÿéšæ¨¡æ¿å®ç°

**æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±ä¸¤éƒ¨åˆ†ç»“æ„ç»„æˆ,ç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ½è±¡çˆ¶ç±»,ç¬¬äºŒéƒ¨åˆ†æ˜¯å…·ä½“çš„å®ç°å­ç±»ã€‚**

**é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶,åŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•ä»¥åŠå°è£…å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåºã€‚ å­ç±»é€šè¿‡ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»,ä¹Ÿç»§æ‰¿äº†æ•´ä¸ªç®—æ³•ç»“æ„,å¹¶ä¸”å¯ä»¥é€‰æ‹©é‡å†™çˆ¶ç±»çš„æ–¹æ³•,å­ç±»å®ç°ä¸­çš„ç›¸åŒéƒ¨åˆ†è¢«ä¸Šç§»åˆ°çˆ¶ç±»ä¸­,è€Œå°†ä¸åŒçš„éƒ¨åˆ†ç•™å¾…å­ç±»æ¥å®ç°**

<img src="@img/æ¨¡ç‰ˆæ¨¡å¼.webp"/>

```js
abstract class Beverage {
  init() {
    // æ¨¡æ¿æ–¹æ³•
    this.boilWater();
    this.brew();
    this.pourInCup();
    this.addCondiments();
  }
  boilWater() {
    console.log("æŠŠæ°´ç…®æ²¸");
  }
  abstract brew();
  abstract pourInCup();
  abstract addCondiments();
}

class Coffee extends Beverage {
  brew(){
    console.log("brew Coffee");
  }
  pourInCup() {

  }
  addCondiments() {

  }
}

class Tea extends Beverage {
  brew(){
    console.log("brew Tea");
  }
  pourInCup() {

  }
  addCondiments() {

  }
}
let c = new Coffee;
c.init()
```

coffe å’Œ tea æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„æ­¥éª¤,éƒ½è¦å…ˆæŠŠæ°´ç»™ç…®æ²¸,åªæ˜¯åé¢çš„åŠ çš„æ–™ä¸åŒ  
æ‰€ä»¥æŠŠç…®æ²¸æ°´ä½œä¸ºä¸€ä¸ªå…¬å…±æ–¹æ³•,å­ç±»é‡å†™è¦†ç›–

:::tip 
ç±»åˆ†ä¸ºä¸¤ç§,ä¸€ç§ä¸ºå…·ä½“ç±»,å¦ä¸€ç§ä¸ºæŠ½è±¡ç±»ã€‚å…·ä½“ç±»å¯ä»¥è¢«å®ä¾‹åŒ–,æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚è¦äº†è§£æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–çš„åŸå› ,æˆ‘ä»¬å¯ä»¥æ€è€ƒâ€œé¥®æ–™â€è¿™ä¸ªæŠ½è±¡ç±»

æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šæˆ‘ä»¬å£æ¸´äº†,å»ä¾¿åˆ©åº—æƒ³ä¹°ä¸€ç“¶é¥®æ–™,æˆ‘ä»¬ä¸èƒ½ç›´æ¥è·Ÿåº—å‘˜è¯´ï¼šâ€œæ¥ä¸€ ç“¶é¥®æ–™ã€‚â€å¦‚æœæˆ‘ä»¬è¿™æ ·è¯´äº†,é‚£ä¹ˆåº—å‘˜æ¥ä¸‹æ¥è‚¯å®šä¼šé—®ï¼šâ€œè¦ä»€ä¹ˆé¥®æ–™ï¼Ÿâ€é¥®æ–™åªæ˜¯ä¸€ä¸ªæŠ½è±¡åè¯,åªæœ‰å½“æˆ‘ä»¬çœŸæ­£æ˜ç¡®äº†çš„é¥®æ–™ç±»å‹ä¹‹å,æ‰èƒ½å¾—åˆ°ä¸€æ¯å’–å•¡ã€èŒ¶ã€æˆ–è€…å¯ä¹

***ç”±äºæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–,å¦‚æœæœ‰äººç¼–å†™äº†ä¸€ä¸ªæŠ½è±¡ç±»,é‚£ä¹ˆè¿™ä¸ªæŠ½è±¡ç±»ä¸€å®šæ˜¯ç”¨æ¥è¢«æŸäº›å…·ä½“ç±»ç»§æ‰¿çš„***

***æŠ½è±¡ç±»ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸€ç§å¥‘çº¦*** æŠ½è±¡ç±»çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºå®ƒçš„å­ç±»å®šä¹‰è¿™äº›å…¬å…±æ¥å£,ä¸èƒ½åˆ æ‰å…¶ä¸­ä¸€ä¸ªæŠ½è±¡æ–¹æ³•  

æ¯”å¦‚ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ åˆ é™¤ä¸€ä¸ªå°±ä¸æˆç«‹äº†

æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§å…¸å‹çš„é€šè¿‡ ***å°è£…å˜åŒ–æé«˜ç³»ç»Ÿæ‰©å±•æ€§çš„è®¾è®¡æ¨¡å¼*** å­ç±»çš„æ–¹æ³•ç§ç±»å’Œæ‰§è¡Œé¡ºåºéƒ½æ˜¯ä¸å˜çš„,æ‰€ä»¥æˆ‘ä»¬æŠŠè¿™éƒ¨åˆ†é€»è¾‘æŠ½è±¡åˆ°çˆ¶ç±»çš„æ¨¡æ¿æ–¹æ³•é‡Œé¢ã€‚è€Œå­ç±»çš„æ–¹æ³•å…·ä½“æ€ä¹ˆå®ç°åˆ™æ˜¯å¯å˜çš„,äºæ˜¯æˆ‘ä»¬æŠŠè¿™éƒ¨åˆ†å˜åŒ–çš„é€»è¾‘å°è£…åˆ°å­ç±»ä¸­ã€‚é€šè¿‡å¢åŠ æ–°çš„å­ç±»,æˆ‘ä»¬ä¾¿èƒ½ç»™ç³»ç»Ÿå¢åŠ æ–°çš„åŠŸèƒ½,å¹¶ä¸éœ€è¦æ”¹åŠ¨æŠ½è±¡çˆ¶ç±»ä»¥åŠå…¶ä»–å­ç±»,è¿™ä¹Ÿæ˜¯ç¬¦åˆå¼€æ”¾å°é—­åŸåˆ™çš„ 
:::

## â­èŒè´£é“¾æ¨¡å¼

> èŒè´£é“¾æ¨¡å¼çš„å®šä¹‰æ˜¯ï¼šä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚,ä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»,å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾,å¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚,ç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢

<img src="@img/è´£ä»»é“¾æ¨¡å¼.webp"/>

### ä¾‹å­ 1

è´Ÿè´£ä¸€ä¸ªå”®å–æ‰‹æœºçš„ç”µå•†ç½‘ç«™,ç»è¿‡åˆ†åˆ«äº¤çº³ 500 å…ƒå®šé‡‘å’Œ 200 å…ƒå®šé‡‘çš„ä¸¤è½®é¢„å®šåï¼ˆè®¢å•å·²åœ¨æ­¤æ—¶ç”Ÿæˆï¼‰,ç°åœ¨å·²ç»åˆ°äº†æ­£å¼è´­ä¹°çš„é˜¶æ®µ

å…¬å¸é’ˆå¯¹æ”¯ä»˜è¿‡å®šé‡‘çš„ç”¨æˆ·æœ‰ä¸€å®šçš„ä¼˜æƒ æ”¿ç­–ã€‚  
åœ¨æ­£å¼è´­ä¹°å,å·²ç»æ”¯ä»˜è¿‡ 500 å…ƒå®šé‡‘çš„ç”¨æˆ·ä¼šæ”¶åˆ° 100 å…ƒçš„å•†åŸä¼˜æƒ åˆ¸  
200 å…ƒå®šé‡‘çš„ç”¨æˆ·å¯ä»¥æ”¶åˆ° 50 å…ƒçš„ä¼˜æƒ åˆ¸  
è€Œä¹‹å‰æ²¡æœ‰æ”¯ä»˜å®šé‡‘ çš„ç”¨æˆ·åªèƒ½è¿›å…¥æ™®é€šè´­ä¹°æ¨¡å¼,ä¹Ÿå°±æ˜¯æ²¡æœ‰ä¼˜æƒ åˆ¸,ä¸”åœ¨åº“å­˜æœ‰é™çš„æƒ…å†µä¸‹ä¸ä¸€å®šä¿è¯èƒ½ä¹°åˆ°

1. orderTypeï¼šè¡¨ç¤ºè®¢å•ç±»å‹ï¼ˆå®šé‡‘ç”¨æˆ·æˆ–è€…æ™®é€šè´­ä¹°ç”¨æˆ·ï¼‰,code çš„å€¼ä¸º 1 çš„æ—¶å€™æ˜¯ 500 å…ƒå®šé‡‘ç”¨æˆ·,ä¸º 2 çš„æ—¶å€™æ˜¯ 200 å…ƒå®šé‡‘ç”¨æˆ·,ä¸º 3 çš„æ—¶å€™æ˜¯æ™®é€šè´­ä¹°ç”¨æˆ·ã€‚
2. payï¼šè¡¨ç¤ºç”¨æˆ·æ˜¯å¦å·²ç»æ”¯ä»˜å®šé‡‘,å€¼ä¸º true æˆ–è€… false, è™½ç„¶ç”¨æˆ·å·²ç»ä¸‹è¿‡ 500 å…ƒå®šé‡‘çš„è®¢å•,ä½†å¦‚æœä»–ä¸€ç›´æ²¡æœ‰æ”¯ä»˜å®šé‡‘,ç°åœ¨åªèƒ½é™çº§è¿›å…¥æ™®é€šè´­ä¹°æ¨¡å¼ã€‚
3. stockï¼šè¡¨ç¤ºå½“å‰ç”¨äºæ™®é€šè´­ä¹°çš„æ‰‹æœºåº“å­˜æ•°é‡,å·²ç»æ”¯ä»˜è¿‡ 500 å…ƒæˆ–è€… 200 å…ƒå®šé‡‘çš„ç”¨æˆ·ä¸å—æ­¤é™åˆ¶ã€‚

```js
var order = function( orderType, pay, stock ){
	if ( orderType === 1 ){ // 500 å…ƒå®šé‡‘è´­ä¹°æ¨¡å¼
		if ( pay === true ){ // å·²æ”¯ä»˜å®šé‡‘
			console.log( '500 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ° 100 ä¼˜æƒ åˆ¸' );
		}else{ // æœªæ”¯ä»˜å®šé‡‘,é™çº§åˆ°æ™®é€šè´­ä¹°æ¨¡å¼
			if ( stock > 0 ){ // ç”¨äºæ™®é€šè´­ä¹°çš„æ‰‹æœºè¿˜æœ‰åº“å­˜
				console.log( 'æ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸' );
			}else{
				console.log( 'æ‰‹æœºåº“å­˜ä¸è¶³' );
			}
		}
	}
	else if ( orderType === 2 ){ // 200 å…ƒå®šé‡‘è´­ä¹°æ¨¡å¼
		if ( pay === true ){
			console.log( '200 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ° 50 ä¼˜æƒ åˆ¸' );
		}else{
			if ( stock > 0 ){
				console.log( 'æ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸' );
			}else{
				console.log( 'æ‰‹æœºåº“å­˜ä¸è¶³' );
			}
		}
	}
	else if ( orderType === 3 ){
		if ( stock > 0 ){
			console.log( 'æ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸' );
		}else{
			console.log( 'æ‰‹æœºåº“å­˜ä¸è¶³' );
		}
	}
};
order( 1 , true, 500); // è¾“å‡ºï¼š 500 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ° 100 ä¼˜æƒ åˆ¸
```
å¾ˆç¬¦åˆç›´è§‰,ä¸€å±‚ä¸€å±‚çš„æ‰§è¡Œ,ä½†æ˜¯è¿™æ ·çš„é—®é¢˜é€ æˆäº†åˆ¤æ–­æ¡ä»¶è¿‡å¤š,ä»£ç å¾ˆå¤æ‚  

éœ€è¦æŠ½ç¦»å‡ºæ¥,æŠ½ç¦»å‡º `order500`,`order200`,`orderNormal`åœ¨å„è‡ªçš„æ–¹æ³•å†…éƒ¨åˆ¤æ–­
#### èŒè´£é“¾é‡æ„

```js
var order500 = function( orderType, pay, stock ){
  if ( orderType === 1 && pay === true ){
    console.log( '500 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ° 100 ä¼˜æƒ åˆ¸' );
  }else{
    order200( orderType, pay, stock ); // å°†è¯·æ±‚ä¼ é€’ç»™ 200 å…ƒè®¢å•
  }
};

// 200 å…ƒè®¢å•
var order200 = function( orderType, pay, stock ){
  if ( orderType === 2 && pay === true ){
    console.log( '200 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ° 50 ä¼˜æƒ åˆ¸' );
  }else{
    orderNormal( orderType, pay, stock ); // å°†è¯·æ±‚ä¼ é€’ç»™æ™®é€šè®¢å•
  }
};

// æ™®é€šè´­ä¹°è®¢å•
var orderNormal = function( orderType, pay, stock ){
  if ( stock > 0 ){
    console.log( 'æ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸' );
  }else{
    console.log( 'æ‰‹æœºåº“å­˜ä¸è¶³' );
  }
};

order500( 1 , true, 500); // è¾“å‡ºï¼š500 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ° 100 ä¼˜æƒ åˆ¸
order500( 1, false, 500 ); // è¾“å‡ºï¼šæ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸
order500( 2, true, 500 ); // è¾“å‡ºï¼š200 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ° 50 ä¼˜æƒ åˆ¸
order500( 3, false, 500 ); // è¾“å‡ºï¼šæ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸
order500( 3, false, 0 ); // è¾“å‡ºï¼šæ‰‹æœºåº“å­˜ä¸è¶³
```

### ä¾‹å­ 2

```js
// å¯¹äºä¸€äº›æµç¨‹å›¾éå¸¸æ–¹ä¾¿
// ç»„é•¿
class ZuZhange {
	handle() {
		console.log("ZuZhangeHandle");
	}
}
// ç»ç†
class jingLi {
	handle() {
		console.log("jingLiHandle");
	}
}
// è€æ¿
class laoBan {
	handle() {
		console.log("laoBanHandle");
	}
}

class Action {
	constructor(name, action) {
		this.name = name;
    // è‡ªå·±çš„è¡ŒåŠ¨
		this.action = action;
    // ä¸‹ä¸€ä¸ªæµç¨‹è¡Œä¸º
		this.nextAction = null;
	}
	setNextAction(action) {
		this.nextAction = action;
	}

	handle() {
		// ç‹¬ä¸€æ— äºŒçš„æ–¹æ³•
		this.action.handle();
		console.log(`${this.name}handle`);
		// é“¾æ¡å¯ä»¥ä¸€ç›´å»¶ç»­
		this.nextAction?.handle();
	}
}

const a1 = new Action("ç»„é•¿", new ZuZhange());
const a2 = new Action("ç»ç†", new jingLi());
const a3 = new Action("è€æ¿", new laoBan());
a1.setNextAction(a2);
a2.setNextAction(a3);
a1.handle();
```

è§£è€¦äº†è¯·æ±‚å‘é€è€…å’Œ N ä¸ªæ¥æ”¶è€…ä¹‹é—´çš„å¤æ‚å…³ç³»,ç”±äºä¸çŸ¥é“é“¾ä¸­çš„å“ªä¸ªèŠ‚ç‚¹å¯ä»¥å¤„ç†ä½ å‘å‡ºçš„è¯·æ±‚,æ‰€ä»¥ä½ åªéœ€æŠŠè¯·æ±‚ä¼ é€’ç»™ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å³å¯,è€Œä¸”å¯ä»¥æ‰‹åŠ¨æŒ‡å®šèµ·å§‹èŠ‚ç‚¹ 

æ— è®ºæ˜¯ä½œç”¨åŸŸé“¾ã€åŸå‹é“¾,è¿˜æ˜¯ DOM èŠ‚ç‚¹ä¸­çš„äº‹ä»¶å†’æ³¡,æˆ‘ä»¬éƒ½èƒ½ä»ä¸­æ‰¾åˆ°èŒè´£é“¾æ¨¡å¼çš„å½±å­

### ä¾‹å­3
>è€æ¿æ´¾å‘äº†ä¸€ä¸ªä»»åŠ¡ï¼Œå…ˆå‘ç»™éƒ¨é—¨ä¸»ç®¡ï¼Œéƒ¨é—¨ä¸»ç®¡è§‰å¾—è‡ªå·±ä¸æƒ³å¤„ç†ï¼Œå°±å‘ä¸‹æ´¾å‘ç»™å°ç»„é•¿ï¼Œå°ç»„é•¿æƒ³å¤„ç†å°±å¤„ç†äº†ï¼Œä¸æƒ³å¤„ç†å°±æ´¾å‘ç»™å‘˜å·¥å¤„ç†ï¼Œæœ€åæŠŠäº‹æƒ…å¤„ç†æ‰

å®šä¹‰æŠ½è±¡äº‹ä»¶å¤„ç†è€…:
```java
interface EventHandler {
  // å¤„ç†äº‹ä»¶ï¼Œè¿”å›å€¼è¡¨ç¤ºæ˜¯å¦å¤„ç†æˆåŠŸ
  boolean handleEvent();
}
```
å®šä¹‰å…·ä½“çš„äº‹ä»¶å¤„ç†è€…ï¼š
```java
// è€æ¿
class Boss implements EventHandler {
  public boolean handleEvent(){
    // ....
    return false
  }
}

// ä¸»ç®¡
class Manager implements EventHandler {
  public boolean handleEvent(){
    // ....
    return false
  }
}

// å°ç»„é•¿
class Leader implements EventHandler {
  public boolean handleEvent(){
    // ....
    return true
  }
}

// å‘˜å·¥
class Staff implements EventHandler {
  public boolean handleEvent(){
    // ....
    return true
  }
}
```
ä½¿ç”¨:

```java
// å®šä¹‰è´£ä»»é“¾
List<EventHandler> handlers = new ArrayList();

// æ·»åŠ äº‹ä»¶å¤„ç†è€…
handlers.add(new Boss());
handlers.add(new Manager());
handlers.add(new Leader());
handlers.add(new Staff());

// å¤„ç†äº‹ä»¶
for(EventHandler handler : handlers) {
  if(handler.handleEvent()) return;
}

```

## ä¸­ä»‹è€…æ¨¡å¼

ä¸­ä»‹è€…æ¨¡å¼çš„ä½œç”¨å°±æ˜¯è§£é™¤å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç´§è€¦åˆå…³ç³»ã€‚***å¢åŠ ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡å,æ‰€æœ‰çš„ç›¸å…³å¯¹è±¡éƒ½é€šè¿‡ä¸­ä»‹è€…å¯¹è±¡æ¥é€šä¿¡,è€Œä¸æ˜¯äº’ç›¸å¼•ç”¨***,æ‰€ä»¥å½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶,åªéœ€è¦é€šçŸ¥ ä¸­ä»‹è€…å¯¹è±¡å³å¯

 <img src="@img/zhongJie.png"/>
 <img src="@img/ä¸­ä»‹è€…æ¨¡å¼.webp"/>

### ä¾‹å­ 1

å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ‰‹æœºè´­ä¹°çš„é¡µé¢,åœ¨è´­ä¹°æµç¨‹ä¸­,å¯ä»¥é€‰æ‹©æ‰‹æœºçš„é¢œè‰²ä»¥åŠè¾“å…¥è´­ä¹°æ•°é‡  
åŒæ—¶é¡µé¢ä¸­æœ‰ä¸¤ä¸ªå±•ç¤ºåŒºåŸŸ,åˆ†åˆ«å‘ç”¨æˆ·å±•ç¤ºåˆšåˆšé€‰æ‹©å¥½çš„é¢œè‰²å’Œæ•°é‡ã€‚

è¿˜æœ‰ä¸€ä¸ªæŒ‰é’®åŠ¨æ€æ˜¾ç¤ºä¸‹ä¸€æ­¥çš„æ“ä½œ  
æˆ‘ä»¬éœ€è¦æŸ¥è¯¢è¯¥é¢œè‰²æ‰‹æœºå¯¹åº”çš„åº“å­˜,å¦‚æœåº“å­˜æ•°é‡å°‘äºè¿™æ¬¡çš„è´­ä¹°æ•°é‡, æŒ‰é’®å°†è¢«ç¦ç”¨å¹¶ä¸”æ˜¾ç¤ºåº“å­˜ä¸è¶³,åä¹‹æŒ‰é’®å¯ä»¥ç‚¹å‡»å¹¶ä¸”æ˜¾ç¤ºæ”¾å…¥è´­ç‰©è½¦     
<img src="@img/zhongJie2.png"/> 


- ä¸‹æ‹‰é€‰æ‹©æ¡† colorSelect
- æ–‡æœ¬è¾“å…¥æ¡† numberInput
- å±•ç¤ºé¢œè‰²ä¿¡æ¯ colorInfo
- å±•ç¤ºè´­ä¹°æ•°é‡ä¿¡æ¯ numberInfo
- å†³å®šä¸‹ä¸€æ­¥æ“ä½œçš„æŒ‰é’® nextBtn

æŒ‰ç…§ä¸€èˆ¬æƒ…å†µä¸‹,å› ä¸ºæ•°é‡ä¸‹æ‹‰é€‰å’Œé¢œè‰²ä¸‹æ‹‰é€‰æœ‰è”åŠ¨,è€Œä¸”æŒ‰é’®çš„çŠ¶æ€æ˜¯åˆä¸è¿™ä¸¤ä¸ªä¸‹æ‹‰é€‰æœ‰å…³è”,æ‰€ä»¥æˆ‘ä»¬å¯èƒ½ä¼šå†™å‡ºå¦‚ä¸‹ä»£ç 

```html
<body>
  é€‰æ‹©é¢œè‰²: <select id="colorSelect">
    <option value="">è¯·é€‰æ‹©</option>
    <option value="red">çº¢è‰²</option>
    <option value="blue">è“è‰²</option>
  </select>
  è¾“å…¥è´­ä¹°æ•°é‡: <input type="text" id="numberInput"/>
  æ‚¨é€‰æ‹©äº†é¢œè‰²: <div id="colorInfo"></div><br/>
  æ‚¨è¾“å…¥äº†æ•°é‡: <div id="numberInfo"></div><br/>

  <button id="nextBtn" disabled="true">è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²å’Œè´­ä¹°æ•°é‡</button>
  <!--  ç›‘å¬ colorSelect çš„ onchange äº‹ä»¶å‡½æ•°å’Œ numberInput çš„ oninput äº‹ä»¶å‡½æ•° -->
  <script>

    var colorSelect = document.getElementById( 'colorSelect' ),
      numberInput = document.getElementById( 'numberInput' ),
      colorInfo = document.getElementById( 'colorInfo' ),
      numberInfo = document.getElementById( 'numberInfo' ),
      nextBtn = document.getElementById( 'nextBtn' );

    var goods = { // æ‰‹æœºåº“å­˜
      "red": 3,
      "blue": 6
    };
    // ç›‘å¬ colorSelect çš„ onchange äº‹ä»¶å‡½æ•°
    colorSelect.onchange = function(){
      var color = this.value, // é¢œè‰²
        number = numberInput.value, // æ•°é‡
        stock = goods[ color ]; // è¯¥é¢œè‰²æ‰‹æœºå¯¹åº”çš„å½“å‰åº“å­˜
      colorInfo.innerHTML = color;

      if ( !color ){
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²';
        return;
      }

      if ( Number.isInteger ( number - 0 ) && number > 0 ){
        // ç”¨æˆ·è¾“å…¥çš„è´­ä¹°æ•°é‡æ˜¯å¦ä¸ºæ­£æ•´æ•°
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡';
        return;
      }

      if ( number > stock ){ // å½“å‰é€‰æ‹©æ•°é‡è¶…è¿‡åº“å­˜é‡
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'åº“å­˜ä¸è¶³';
        return ;
      }

      nextBtn.disabled = false;
      nextBtn.innerHTML = 'æ”¾å…¥è´­ç‰©è½¦';
    };

    // numberInput çš„ oninput äº‹ä»¶å‡½æ•°
    numberInput.oninput = function(){
      var color = colorSelect.value, // é¢œè‰²
        number = this.value, // æ•°é‡
        stock = goods[ color ]; // è¯¥é¢œè‰²æ‰‹æœºå¯¹åº”çš„å½“å‰åº“å­˜
      numberInfo.innerHTML = number;

      if ( !color ){
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²';
        return;
      }

      // è¾“å…¥è´­ä¹°æ•°é‡æ˜¯å¦ä¸ºæ­£æ•´æ•°
      if ((( number - 0 ) | 0 ) !== number - 0 ){ 
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡';
        return;
      }
      // å½“å‰é€‰æ‹©æ•°é‡æ²¡æœ‰è¶…è¿‡åº“å­˜é‡
      if ( number > stock ){ 
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'åº“å­˜ä¸è¶³';
        return ;
      }
      nextBtn.disabled = false;
      nextBtn.innerHTML = 'æ”¾å…¥è´­ç‰©è½¦';
    };

  </script>
</body>
```

å¦‚æœåé¢å†å¢åŠ å†…å­˜è¾“å…¥æ¡†,è¿˜æ˜¯ä¼šè¦å‘ç”Ÿå˜åŠ¨

#### ä¸­ä»‹è€…æ¨¡å¼é‡æ„

æ‰€æœ‰çš„åŠŸèƒ½é›†ä¸­åˆ°ä¸­ä»‹è€…ä¸­ç»Ÿä¸€å¤„ç†

```js
var goods = { // æ‰‹æœºåº“å­˜
  "red|32G": 3,
  "red|16G": 0,
  "blue|32G": 1,
  "blue|16G": 6
};

// è‡ªæ‰§è¡Œå‡½æ•°ä¿è¯æ•°æ®æ²¡æœ‰æ±¡æŸ“
var mediator = (function(){
  var colorSelect = document.getElementById( 'colorSelect' ),
    memorySelect = document.getElementById( 'memorySelect' ),
    numberInput = document.getElementById( 'numberInput' ),
    colorInfo = document.getElementById( 'colorInfo' ),
    memoryInfo = document.getElementById( 'memoryInfo' ),
    numberInfo = document.getElementById( 'numberInfo' ),
    nextBtn = document.getElementById( 'nextBtn' );

  return {
    changed: function( obj ){
      var color = colorSelect.value, // é¢œè‰²
        memory = memorySelect.value,// å†…å­˜
        number = numberInput.value, // æ•°é‡
        stock = goods[ color + '|' + memory ]; // é¢œè‰²å’Œå†…å­˜å¯¹åº”çš„æ‰‹æœºåº“å­˜æ•°é‡

      if ( obj === colorSelect ){ // å¦‚æœæ”¹å˜çš„æ˜¯é€‰æ‹©é¢œè‰²ä¸‹æ‹‰æ¡†
        colorInfo.innerHTML = color;
      }else if ( obj === memorySelect ){
        memoryInfo.innerHTML = memory;
      }else if ( obj === numberInput ){
        numberInfo.innerHTML = number;
      }

      if ( !color ){
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²';
        return;
      }
      if ( !memory ){
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'è¯·é€‰æ‹©å†…å­˜å¤§å°';
        return;
      }
      // è¾“å…¥è´­ä¹°æ•°é‡æ˜¯å¦ä¸ºæ­£æ•´æ•°
      if ( Number.isInteger ( number - 0 ) && number > 0 ){ 
        nextBtn.disabled = true;
        nextBtn.innerHTML = 'è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡';
        return;
      }
      nextBtn.disabled = false;
      nextBtn.innerHTML = 'æ”¾å…¥è´­ç‰©è½¦';
    }
  }
})();

// äº‹ä»¶å‡½æ•°ï¼š
colorSelect.onchange = function(){
  mediator.changed( this );
};
memorySelect.onchange = function(){
  mediator.changed( this );
};
numberInput.oninput = function(){
  mediator.changed( this );
};
```

:::tip 

***ä¸­ä»‹è€…æ¨¡å¼æ˜¯è¿åˆè¿ªç±³ç‰¹æ³•åˆ™çš„ä¸€ç§å®ç°ã€‚è¿ªç±³ç‰¹æ³•åˆ™ä¹Ÿå«æœ€å°‘çŸ¥è¯†åŸåˆ™,æ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡åº”è¯¥å°½å¯èƒ½å°‘åœ°äº†è§£å¦å¤–çš„å¯¹è±¡(ç±»ä¼¼ä¸å’Œé™Œç”Ÿäººè¯´è¯),å¦‚æœå¯¹è±¡ä¹‹é—´çš„è€¦åˆæ€§å¤ªé«˜,ä¸€ä¸ªå¯¹è±¡ å‘ç”Ÿæ”¹å˜ä¹‹å,éš¾å…ä¼šå½±å“åˆ°å…¶ä»–çš„å¯¹è±¡***


ä¸­ä»‹è€…æ¨¡å¼ä½¿å„ä¸ªå¯¹è±¡ä¹‹é—´å¾—ä»¥è§£è€¦,ä»¥ä¸­ä»‹è€…å’Œå¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šå…³ç³»å–ä»£äº†å¯¹è±¡ä¹‹é—´çš„ç½‘çŠ¶å¤šå¯¹å¤šå…³ç³»ã€‚å„ä¸ªå¯¹è±¡åªéœ€å…³æ³¨è‡ªèº«åŠŸèƒ½çš„å®ç°,å¯¹è±¡ä¹‹é—´çš„äº¤äº’å…³ç³»äº¤ç»™äº†ä¸­ä»‹è€…å¯¹è±¡æ¥å®ç°å’Œç»´æŠ¤

æœ€å¤§çš„ç¼ºç‚¹æ˜¯ç³»ç»Ÿä¸­ä¼šæ–°å¢ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡,å› ä¸ºå¯¹è±¡ä¹‹é—´äº¤äº’çš„å¤æ‚æ€§,è½¬ç§»æˆäº†ä¸­ä»‹è€…å¯¹è±¡çš„å¤æ‚æ€§,ä½¿å¾—ä¸­ä»‹è€…å¯¹è±¡ç»å¸¸æ˜¯å·¨å¤§çš„ã€‚ä¸­ä»‹è€…å¯¹è±¡è‡ªèº«å¾€å¾€å°±æ˜¯ä¸€ä¸ªéš¾ä»¥ç»´æŠ¤çš„å¯¹è±¡ 
:::

## è£…é¥°å™¨æ¨¡å¼

è£…é¥°å™¨æ¨¡å¼èƒ½å¤Ÿåœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Š,åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç»™å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£

 <img src="@img/è£…é¥°å™¨æ¨¡å¼.webp"/>

```js
// è£…é¥°ä¸€ä¸ªç±»
// è¡¨æ˜æŠŠè¿™ä¸ªç±»å½“åšå‚æ•°ä¼ è¿›è£…é¥°å™¨ä¸­,ä¼šè‡ªåŠ¨æ‰§è¡Œ

// ä¸ä¼ å‚
@testable
class MyTestableClass {
 // ...
}

function testable(target) {
 target.isTestable = true;
}

// ä¼ å‚,å› ä¸ºä¼šè‡ªåŠ¨æ‰§è¡Œ,æ‰€ä»¥è¦ä½¿ç”¨ä¼ é€’ä¸€ä¸ªå‡½æ•°
@Dec(true)
class Shape {
 // ...
}

function Dec(isDec) {
 return function(target) {
   target.isDec = isDec
 }
}

console.log(Shape.isDec)

// è£…é¥°ä¸€ä¸ªæ–¹æ³•
class Shape {
 @log
 setColor(color) {
   return color
 }
}

function log(target, name, descriptor) {
 var oldValue = descriptor.value
 // å‡½æ•°åˆ‡ç‰‡
 descriptor.value = function() {
   console.log(`Calling ${name} width `, arguments)
   return oldValue.apply(this, arguments)
 }
 return descriptor
}
// ç±»ä¼¼äº
Object.defineProperty(Shape.prototype, 'setColor', descriptor);
// descriptorå¯¹è±¡åŸæ¥çš„å€¼å¦‚ä¸‹
// {
//   value: specifiedFunction,
//   enumerable: false,
//   configurable: true,
//   writable: true
// };

const shape = new Shape()
const color = shape.setColor('red')
console.log('color', color)

// ä¾‹å­2
class Person {
 @readonly
 name() { return `${this.first} ${this.last}` }
}

function readonly(target, name, descriptor){
 // descriptorå¯¹è±¡åŸæ¥çš„å€¼å¦‚ä¸‹
 // {
 //   value: specifiedFunction,
 //   enumerable: false,
 //   configurable: true,
 //   writable: true
 // };
 descriptor.writable = false;
 return descriptor;
}

// è£…é¥°å™¨ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»çš„åŸå‹å¯¹è±¡,ä¸Šä¾‹æ˜¯ Person.prototype
// è£…é¥°å™¨çš„æœ¬æ„æ˜¯è¦â€œè£…é¥°â€ç±»çš„å®ä¾‹
// ä½†æ˜¯è¿™ä¸ªæ—¶å€™å®ä¾‹è¿˜æ²¡ç”Ÿæˆ,æ‰€ä»¥åªèƒ½å»è£…é¥°åŸå‹

// ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€è¦è£…é¥°çš„å±æ€§å,ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚
```

### Aop

```js
Function.prototype.before = function( beforefn ){
	var __self = this; // ä¿å­˜åŸå‡½æ•°çš„å¼•ç”¨
	return function(){ // è¿”å›åŒ…å«äº†åŸå‡½æ•°å’Œæ–°å‡½æ•°çš„"ä»£ç†"å‡½æ•°
		beforefn.apply( this, arguments );
		// æ‰§è¡Œæ–°å‡½æ•°,ä¸”ä¿è¯ this ä¸è¢«åŠ«æŒ,æ–°å‡½æ•°æ¥å—çš„å‚æ•°
		// ä¹Ÿä¼šè¢«åŸå°ä¸åŠ¨åœ°ä¼ å…¥åŸå‡½æ•°,æ–°å‡½æ•°åœ¨åŸå‡½æ•°ä¹‹å‰æ‰§è¡Œ
		return __self.apply( this, arguments ); // æ‰§è¡ŒåŸå‡½æ•°å¹¶è¿”å›åŸå‡½æ•°çš„æ‰§è¡Œç»“æœ,
		// å¹¶ä¸”ä¿è¯ this ä¸è¢«åŠ«æŒ
	}
}

Function.prototype.after = function( afterfn ){
	var __self = this;
	return function(){
		var ret = __self.apply( this, arguments );
		afterfn.apply( this, arguments );
		return ret;
	}
};

function a(a,b){
	console.log(a,b)
}

let s = a.before(a)

s(1,4)
```

## æ¡¥æ¥æ¨¡å¼

æ¡¥æ¥æ¨¡å¼å¾ˆå¥½çš„ä½“ç°äº†ä¸€ä¸ªç±»åªåšä¸€ä»¶äº‹,ç„¶åé€šè¿‡æ³¨å…¥çš„æ–¹å¼å¼•ç”¨,ç±»ä¸ç±»ä¹‹é—´æ²¡æœ‰å¼ºå…³è”,å¦‚æœä»¥åæƒ³è¦æ›¿æ¢,åªè¦ä¿è¯æ›¿æ¢åçš„ç±»æœ‰æš´éœ²å‡ºåŒæ ·çš„ api å³å¯

***æŠŠäº‹ç‰©å¯¹è±¡å’Œå…¶å…·ä½“è¡Œä¸ºã€å…·ä½“ç‰¹å¾åˆ†ç¦»å¼€æ¥,ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹çš„å˜åŒ–***


<img src="@img/æ¡¥æ¥æ¨¡å¼.webp"/>

```js
class Color {
	constructor(name){
		this.name = name
	}
}

class Shape {
	constructor(shape,color){
		this.shape = shape
		this.color = color
	}
	draw(){
		console.log( `${this.shape}æ˜¯${this.color.name}` )
	}
}

const red = new Color('red')
const circle = new Shape('circle',red)
circle.draw()

const yellow = new Color('yellow')
const triangle = new Shape('triangle', yellow)
triangle.draw()
```

 <img src="@img/qiaoJie.png"/>

## å¤–è§‚æ¨¡å¼

**ç›®çš„æ˜¯ä¸ºäº†æš´éœ²å‡ºç»Ÿä¸€çš„ä¸€ä¸ªæ¥å£,æ–¹ä¾¿è°ƒç”¨**

<img src="@img/å¤–è§‚æ¨¡å¼.webp"/>

```js
function bindEvent (ele,selector,fn){
	if(!fn){
		fn = selector;
		selector = null
	}
	fn()
}

bindEvent('a','#div',()=>{
	console.log(111)
})

bindEvent('b',()=>{
	console.log(222)
})
```

```js
  class BarChart {
  draw () {
    console.log('ç”»ä¸€ä¸ªæŸ±çŠ¶å›¾')
  }
}
class SectorGraph {
  draw () {
    console.log('ç”»ä¸€ä¸ªé¥¼å›¾')
  }
}
class LineChart {
  draw () {
    console.log('ç”»ä¸€ä¸ªæŠ˜çº¿å›¾å›¾')
  }
}

class Chart {
  constructor() {
    this.barChart = new BarChart()
    this.sectorGraph = new SectorGraph()
    this.lineChart = new LineChart()
  }
  drawBarChart () {
    this.barChart.draw()
  }
  drawSectorGraph () {
    this.sectorGraph.draw()
  }
  drawLineChart () {
    this.lineChart.draw()
  }
}

const chart = new Chart()
chart.drawBarChart() // ç”»ä¸€ä¸ªæŸ±çŠ¶å›¾
chart.drawSectorGraph() // ç”»ä¸€ä¸ªé¥¼å›¾
chart.drawLineChart() // ç”»ä¸€ä¸ªæŠ˜çº¿å›¾å›¾
```
dom å…¼å®¹,ä¹Ÿå¯ä»¥å…¼å®¹ä¸åŒå‚æ•°æ•°é‡
```js
  function addEvent(dom, type, fn) {
  if (dom.addEventListener) {      // æ”¯æŒDOM2çº§äº‹ä»¶å¤„ç†æ–¹æ³•çš„æµè§ˆå™¨
    dom.addEventListener(type, fn, false)
  } else if (dom.attachEvent) {    // ä¸æ”¯æŒDOM2çº§ä½†æ”¯æŒattachEvent
    dom.attachEvent('on' + type, fn)
  } else {
    dom['on' + type] = fn      // éƒ½ä¸æ”¯æŒçš„æµè§ˆå™¨
  }
}

const myInput = document.getElementById('myinput')
addEvent(myInput, 'click', function() {console.log('ç»‘å®š click äº‹ä»¶')})
```

## å•ä¾‹æ¨¡å¼

<img src="@img/å•ä¾‹æ¨¡å¼.webp"/>

```js
  class SingObjcet {
  login(arg){
    console.log('login',arg);
  }
}

// è‡ªæ‰§è¡Œå‡½æ•°
SingObjcet.getInstance = (function(){
  let instance;
  return function (){
    if(!instance){
      instance = new SingObjcet()
    }
    return instance
  }
})()

let obj1 = SingObjcet.getInstance()
obj1.login(12)

let obj2= SingObjcet.getInstance()
obj2.login()

console.log(obj1 == obj2); //true
```

```js
let _Vue

function install(vue){

  if(install.installed){
    return _Vue
  }

  install.installed = true
  _Vue = vue
  return _Vue
}
```

## æ€»ç»“

å…ˆæœ‰è®¾è®¡æ¨¡å¼çš„æ€æƒ³,åæ¥æœ‰çš„è®¾è®¡,æœ€åæœ‰çš„æ¨¡å¼  

è®¾è®¡æ¨¡å¼çš„æ€æƒ³å¾ˆç®€å•,æ€»ç»“æ¥è¯´:**å°±æ˜¯å°½å¯èƒ½çš„ä¸å»ä¿®æ”¹åŸæœ‰çš„ä»£ç **  

å› ä¸ºä¿®æ”¹å°±æ„å‘³ç€å¯èƒ½ä¼šå‡ºç°é”™è¯¯  -- 2023/11/23 4:23 æµ·æ™ºä¸­å¿ƒ